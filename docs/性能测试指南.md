# ⚡ 性能测试指南

本文档提供完整的性能测试方法和基准。

## 🎯 性能目标

### Core Web Vitals
- **LCP** (Largest Contentful Paint): < 2.5s
- **FID** (First Input Delay): < 100ms  
- **CLS** (Cumulative Layout Shift): < 0.1

### API 性能
- **响应时间**: < 500ms (P95)
- **并发处理**: > 100 req/s
- **错误率**: < 0.1%

### 数据库性能
- **查询时间**: < 100ms (P95)
- **连接池**: 2-10 连接
- **慢查询**: < 1%

## 🛠️ 测试工具

### 1. Lighthouse
```bash
npm install -g lighthouse
lighthouse https://yourdomain.com --output html --output-path=./performance-report.html
```

### 2. WebPageTest
访问: https://www.webpagetest.org/
输入 URL 进行测试

### 3. k6 (负载测试)
```javascript
// load-test.js
import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  stages: [
    { duration: '2m', target: 100 },
    { duration: '5m', target: 100 },
    { duration: '2m', target: 0 },
  ],
};

export default function () {
  let response = http.get('https://yourdomain.com');
  check(response, { 'status was 200': (r) => r.status == 200 });
  sleep(1);
}
```

运行测试:
```bash
k6 run load-test.js
```

## 📊 性能基准

| 场景 | 目标 | 可接受 | 不可接受 |
|------|------|--------|---------|
| 首页加载 | < 1.5s | < 2.5s | > 3s |
| 登录操作 | < 300ms | < 500ms | > 1s |
| AI 对话 | < 2s | < 3s | > 5s |
| 支付流程 | < 500ms | < 1s | > 2s |
| 文件上传 | < 3s | < 5s | > 10s |

## 🔍 性能优化检查项

- [ ] 图片优化 (WebP, 压缩)
- [ ] 代码分割
- [ ] 懒加载
- [ ] CDN 配置
- [ ] 缓存策略
- [ ] 数据库索引
- [ ] API 响应压缩
- [ ] 预加载关键资源

---

完整测试指南请参考项目文档。
