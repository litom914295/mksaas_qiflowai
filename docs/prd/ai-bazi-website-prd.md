# AI八字风水网站产品需求文档 (PRD)

## 1. 产品愿景与目标

### 愿景声明
打造一个融合传统智慧与现代科技的AI八字风水分析平台，通过精确的算法计算和智能化解读，让用户能够深入了解自己的命理特征和居住环境的风水格局，获得个性化的人生指导和环境优化建议。

### 核心目标
1. **算法精确性**: 确保八字计算和风水分析的专业准确性
2. **用户友好性**: 提供直观易懂的分析结果和建议
3. **转化率优化**: 提升首页到分析完成的用户转化率至30%以上
4. **价值传递**: 平衡文化传承与现代应用，避免迷信导向

## 2. 目标用户画像

### 主要用户群体
1. **文化探索者** (35%)
   - 年龄: 25-40岁
   - 特征: 对传统文化感兴趣，寻求自我认知
   - 需求: 了解八字命理，获得人生指导

2. **风水爱好者** (30%)
   - 年龄: 30-55岁
   - 特征: 关注居住环境，追求生活品质
   - 需求: 家居风水分析，环境优化建议

3. **专业从业者** (20%)
   - 特征: 风水师、命理师等专业人士
   - 需求: 专业工具辅助，精确计算结果

4. **好奇体验者** (15%)
   - 年龄: 18-30岁
   - 特征: 首次接触，娱乐为主
   - 需求: 简单易懂，趣味性强

## 3. 核心功能需求

### 3.1 八字分析功能
**优先级**: P0

#### 输入要求
- 出生日期时间（精确到时辰）
- 出生地点（用于真太阳时计算）
- 性别（影响大运排列）

#### 输出内容
- 四柱八字排盘
- 五行分析图表
- 十神分布
- 用神喜忌分析
- 大运流年预测
- 性格特征解读
- 事业财运建议
- 感情婚姻指导

### 3.2 风水分析功能
**优先级**: P0

#### 输入要求
- 房屋坐向（度数）
- 建造/入住年份
- 户型平面（可选）
- 所在城市

#### 输出内容
- 玄空飞星盘
- 九宫方位分析
- 吉凶方位标注
- 风水布局建议
- 化煞方法推荐
- 财位文昌位定位

### 3.3 AI智能问答
**优先级**: P0

#### 核心原则：算法优先
- **必须**基于已计算的八字/风水数据回答
- **禁止**脱离计算结果进行推测
- **自动**检测是否有分析数据
- **引导**无数据用户先完成分析

#### 功能特性
- 上下文理解
- 专业术语解释
- 个性化建议
- 多轮对话支持

### 3.4 报告生成与分享
**优先级**: P1

- PDF专业报告导出
- 社交媒体分享卡片
- 报告历史记录
- 收藏夹功能

## 4. 用户旅程设计

### 4.1 首页着陆体验
1. **Hero区域**
   - 主标题: "AI赋能传统智慧，解码你的人生密码"
   - 副标题: "专业八字分析与风水指导，基于千年易学智慧"
   - 主CTA: "立即开始我的八字分析"
   - 次CTA: "查看示例报告"

2. **信任建立**
   - 算法准确性说明
   - 隐私保护承诺
   - 用户评价展示
   - 专业认证标识

3. **功能介绍**
   - 三大核心功能卡片
   - 动效演示
   - 快速入口

### 4.2 分析流程（渐进式表单）
1. **Step 1: 选择分析类型**
   - 八字分析
   - 风水分析
   - 综合分析

2. **Step 2: 信息收集**
   - 分步骤收集必要信息
   - 实时验证
   - 智能提示

3. **Step 3: 确认与计算**
   - 信息确认
   - 计算过程可视化
   - 预计完成时间

4. **Step 4: 结果展示**
   - 核心结论优先
   - 可交互图表
   - 详细解读折叠

### 4.3 AI问答体验
1. **数据检测**
   - 自动检查是否有分析数据
   - 无数据时显示引导卡片

2. **智能对话**
   - 基于分析结果回答
   - 推荐问题列表
   - 语音输入支持（可选）

3. **结果整理**
   - 对话历史保存
   - 重点标记功能
   - 导出对话记录

## 5. 非功能性需求

### 5.1 性能要求
- 首屏加载时间 < 2秒
- LCP < 2.5秒
- FID < 100毫秒
- CLS < 0.1
- 计算响应时间 < 1秒

### 5.2 可用性要求
- 移动端优先设计
- 支持PWA
- 离线缓存关键页面
- 无障碍设计(WCAG 2.1 AA)

### 5.3 安全性要求
- 用户数据加密存储
- HTTPS全站部署
- API请求签名验证
- 防止恶意爬取

### 5.4 合规要求
- 年龄限制(18+)
- 免责声明显著展示
- GDPR/隐私政策合规
- 敏感话题过滤

## 6. 数据契约定义

### 6.1 八字计算契约
```typescript
interface BaziInput {
  birthDate: string;      // ISO 8601格式
  birthTime: string;      // HH:mm
  timezone: string;       // IANA时区
  longitude: number;      // 经度
  latitude: number;       // 纬度
  gender: 'male' | 'female';
  calendar: 'solar' | 'lunar';
}

interface BaziOutput {
  fourPillars: {
    year: Pillar;
    month: Pillar;
    day: Pillar;
    hour: Pillar;
  };
  elements: ElementStats;
  tenGods: TenGodAnalysis;
  trueSolarTime: boolean;
  dayBoundary: string;
  version: string;
  hash: string;
  timestamp: string;
}
```

### 6.2 风水计算契约
```typescript
interface FengshuiInput {
  facing: number;         // 朝向度数 0-360
  sitting: number;        // 坐向度数
  buildYear: number;      // 建造年份
  moveInYear?: number;    // 入住年份
  floorPlan?: string;     // Base64编码图片
  city: string;
  longitude: number;
  latitude: number;
}

interface FengshuiOutput {
  flyingStars: StarChart;
  palaces: PalaceAnalysis;
  auspicious: Direction[];
  inauspicious: Direction[];
  recommendations: Recommendation[];
  period: number;
  version: string;
  hash: string;
  timestamp: string;
}
```

## 7. 成功指标(KPI)

### 7.1 用户增长指标
- 月活跃用户(MAU): 10,000+
- 用户留存率(7日): > 40%
- 用户留存率(30日): > 20%

### 7.2 转化指标
- 首页→分析完成: > 30%
- 分析→AI问答: > 50%
- 免费→付费: > 5%

### 7.3 质量指标
- 计算准确率: > 99.9%
- 用户满意度: > 4.5/5
- 页面错误率: < 0.1%
- AI回答相关性: > 95%

### 7.4 性能指标
- 平均响应时间: < 500ms
- 服务可用性: > 99.9%
- 并发支持: 1000+

## 8. 发布计划

### Phase 1: MVP (第1-2周)
- [x] 基础八字计算
- [x] 基础风水分析
- [ ] 算法优先AI问答
- [ ] 响应式设计

### Phase 2: 增强 (第3-4周)
- [ ] 用户账号系统
- [ ] 历史记录
- [ ] PDF导出
- [ ] 性能优化

### Phase 3: 扩展 (第5-6周)
- [ ] 付费功能
- [ ] 专业工具
- [ ] API开放
- [ ] 多语言优化

## 9. 风险与对策

### 技术风险
- **风险**: 算法准确性争议
- **对策**: 引用权威资料，提供多种算法选项

### 市场风险
- **风险**: 用户接受度不确定
- **对策**: A/B测试，快速迭代

### 合规风险
- **风险**: 涉及迷信内容
- **对策**: 强调文化价值，添加免责声明

### 运营风险
- **风险**: 恶意使用/攻击
- **对策**: 限流策略，用户行为监控

## 10. 验收标准

### 功能验收
- [ ] 八字计算结果与权威工具一致
- [ ] 风水分析符合玄空理论
- [ ] AI回答基于计算数据
- [ ] 所有页面移动端适配

### 性能验收
- [ ] Lighthouse评分 > 90
- [ ] 核心Web指标达标
- [ ] 压测通过(1000并发)

### 用户验收
- [ ] 用户测试满意度 > 4/5
- [ ] 无重大bug
- [ ] 文档完整

---
*文档版本: 1.0.0*
*更新日期: 2025-01-05*
*负责人: AI全栈交付代理*