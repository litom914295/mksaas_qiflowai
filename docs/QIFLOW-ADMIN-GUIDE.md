# 🔮 QiFlow AI 管理后台完整使用指南

## 📖 文档简介

本文档是 QiFlow AI 智能命理风水分析平台的管理后台完整使用指南，包含所有功能模块的详细说明和操作步骤。

---

## 🎯 平台概述

### 核心业务
QiFlow AI 是一个基于 AI 技术的智能命理风水分析平台，提供以下核心服务：

1. **八字分析** - 基于生辰八字的命理分析
2. **玄空风水** - 飞星风水布局分析
3. **智能罗盘** - 基于传感器的实时罗盘定位
4. **户型分析** - 可视化户型编辑与风水评估
5. **AI 咨询** - 多模型支持的智能对话咨询

### 技术架构
- **前端**: Next.js 15 + React 19 + TypeScript
- **后端**: Next.js API Routes + Server Actions
- **数据库**: PostgreSQL (Prisma ORM)
- **认证**: Better Auth
- **UI 框架**: Shadcn UI + Tailwind CSS
- **AI 模型**: OpenAI, Anthropic, Perplexity等多模型支持

---

## 🔑 登录与访问

### 管理员登录

#### 登录入口
- **超级管理员登录**: http://localhost:3000/superadmin
- **测试登录**: http://localhost:3000/test-login

#### 默认管理员账户

| 账户类型 | 邮箱 | 密码 | 权限 |
|---------|------|------|------|
| **超级管理员** | admin@qiflowai.com | Admin@123456 | 完全系统访问权限 |

> ⚠️ **安全提示**: 
> - 首次登录后请立即修改默认密码
> - 不要在公共设备上登录管理后台
> - 定期更换密码以保证系统安全

#### 登录后跳转
登录成功后自动跳转到管理后台主页：
```
http://localhost:3000/zh-CN/admin
```

---

## 📊 功能模块详解

### 1. 数据概览模块

#### 1.1 仪表板 (`/admin/dashboard`)

**核心功能**:
- 今日测算次数统计（八字 + 风水）
- 积分消耗趋势分析
- 活跃用户数实时监控
- AI 对话咨询量统计
- 系统运行状态监控

**关键指标**:
- 今日测算: 显示当日八字和风水测算总次数
- 积分消耗: 显示积分使用情况及对比昨日变化
- 活跃用户: 显示当日活跃用户数及增长率
- AI 对话: 显示AI咨询服务使用情况

**使用场景**:
- 每日运营数据概览
- 快速了解平台运行状态
- 发现异常数据及时处理

#### 1.2 数据分析 (`/admin/analytics`)

**核心功能**:
- 用户行为分析
- 业务转化漏斗
- 收益报表与趋势
- 自定义时间范围查询
- 数据导出功能

**分析维度**:
- 用户来源分析
- 功能使用频率
- 付费转化路径
- 用户留存情况

---

### 2. QiFlow 业务管理模块

#### 2.1 八字分析管理 (`/admin/qiflow/bazi`)

**核心功能**:
- 八字测算记录查询与管理
- 算法质量监控与优化
- 用户反馈收集与处理
- 测算频率统计分析

**管理内容**:
- **测算记录**:
  - 用户ID、测算时间
  - 输入数据（生辰八字）
  - 输出结果（日柱、五行、运势等）
  - 消耗积分记录

- **质量监控**:
  - 算法准确性评估
  - 用户满意度统计
  - 常见问题收集

- **统计分析**:
  - 每日测算次数趋势
  - 高峰时段分析
  - 用户偏好洞察

**操作指南**:
1. 查询测算记录：输入用户ID或时间范围
2. 查看详细结果：点击记录查看完整分析
3. 处理用户反馈：及时回复用户问题
4. 导出数据报表：用于深度分析

#### 2.2 风水分析管理 (`/admin/qiflow/fengshui`)

**核心功能**:
- 玄空风水测算记录
- 户型分析数据管理
- 风水建议质量审核
- 用户咨询记录

**管理内容**:
- **玄空风水**:
  - 飞星布局记录
  - 方位吉凶分析
  - 化解建议管理

- **户型分析**:
  - 户型图数据
  - 布局评估结果
  - 优化建议记录

#### 2.3 罗盘使用统计 (`/admin/qiflow/compass`)

**核心功能**:
- 罗盘调用次数统计
- 精度分析与校准管理
- 设备信息统计
- 置信度分布分析

**监控指标**:
- 调用次数（按时间、地区）
- 校准成功率
- 设备类型分布
- 传感器精度分析

**使用场景**:
- 监控罗盘功能使用情况
- 发现精度问题及时优化
- 了解用户设备分布

#### 2.4 AI 对话管理 (`/admin/qiflow/ai-chat`)

**核心功能**:
- AI 咨询记录查询
- 模型配置管理
- 对话质量监控
- 用户满意度统计

**管理内容**:
- **对话记录**:
  - 用户问题
  - AI 回答
  - 模型选择
  - 消耗 Token数

- **模型配置**:
  - 切换不同AI模型
  - 调整模型参数
  - 设置回答长度
  - 配置温度参数

- **质量监控**:
  - 回答准确性
  - 响应速度
  - 用户反馈评分

---

### 3. 增长与运营模块

#### 3.1 增长仪表板 (`/admin/operations/growth/dashboard`)

**核心功能**:
- K因子监控（病毒传播系数）
- 用户留存率分析
- 激活率追踪
- 数据可视化图表

**关键指标**:
- **K因子**: 衡量用户邀请效果，>1表示增长
- **留存率**: 7日、30日留存情况
- **激活率**: 注册后完成首次测算比例

#### 3.2 积分系统 (`/admin/operations/growth/credits`)

**核心功能**:
- 积分发放记录管理
- 消耗统计分析
- 用户积分余额管理
- 积分包配置

**管理功能**:
- **发放管理**:
  - 注册赠送: 70积分
  - 每日签到: 10-30积分随机
  - 推荐奖励: 50积分
  - 手动调整积分

- **消耗记录**:
  - 八字测算: 按配置扣除
  - 风水分析: 按配置扣除
  - AI咨询: 按Token消耗

- **积分包配置**:
  - Basic: 100积分
  - Standard: 200积分
  - Premium: 500积分
  - Enterprise: 1000积分

#### 3.3 推荐系统 (`/admin/operations/growth/referrals`)

**核心功能**:
- 推荐码生成与管理
- 奖励发放规则配置
- 转化追踪与分析
- 推荐关系图可视化

**管理内容**:
- **推荐码管理**:
  - 自动生成唯一码
  - 查询推荐记录
  - 批量导出数据

- **奖励机制**:
  - 邀请人奖励: 50积分
  - 被邀请人奖励: 50积分
  - 多级奖励配置

#### 3.4 分享激励 (`/admin/operations/growth/shares`)

**核心功能**:
- 分享记录统计
- 海报生成数据
- 转化率分析
- 奖励发放管理

**功能特点**:
- 支持八字、风水结果分享
- 自动生成精美海报
- 追踪分享来源转化

#### 3.5 反欺诈系统 (`/admin/operations/growth/fraud`)

**核心功能**:
- 风控规则配置
- 异常行为检测
- 黑名单管理
- 实时告警通知

**防护措施**:
- IP地址限制
- 设备指纹追踪
- 频率限制规则
- 异常模式识别

---

### 4. 用户与内容管理

#### 4.1 用户管理 (`/admin/users`)

**核心功能**:
- 用户列表查询
- 用户详情查看
- 会员等级管理
- 权限分配
- 账户状态管理

**管理操作**:
- 查看用户基本信息
- 查看测算历史记录
- 调整积分余额
- 禁用/启用账户
- 修改用户权限

#### 4.2 内容管理 (`/admin/content`)

**核心功能**:
- 博客文章管理
- 知识库维护
- SEO 优化配置

---

### 5. 系统管理模块

#### 5.1 系统配置 (`/admin/settings`)

**核心功能**:
- 全局系统设置
- 支付配置管理
- API 密钥管理

**配置项**:
- **支付设置**:
  - Stripe 配置
  - 支付宝配置
  - 微信支付配置

- **API管理**:
  - OpenAI API Key
  - Anthropic API Key
  - Perplexity API Key
  - 其他第三方服务密钥

#### 5.2 文档中心 (`/admin/docs`)

**核心功能**:
- 系统使用文档
- API 接口文档
- 操作手册
- 开发指南

#### 5.3 审计日志 (`/admin/audit`)

**核心功能**:
- 管理员操作记录
- 系统安全审计
- 异常行为日志

**日志类型**:
- 登录记录
- 数据修改记录
- 配置变更记录
- 异常操作记录

---

## 🔐 安全与权限

### 权限管理

#### 权限级别
1. **超级管理员**: 完全访问权限
2. **运营管理员**: 业务数据和运营模块权限
3. **内容编辑**: 内容管理权限
4. **数据分析师**: 只读查询权限

### 安全建议

1. **密码安全**:
   - 使用强密码（至少12位，包含大小写、数字、特殊字符）
   - 定期更换密码（建议每3个月）
   - 不同系统使用不同密码

2. **访问安全**:
   - 仅在安全网络环境下登录
   - 不在公共设备上保存密码
   - 及时退出登录

3. **操作规范**:
   - 所有重要操作都会被记录
   - 谨慎处理用户数据
   - 遵守数据隐私法规

---

## 📈 关键指标说明

### 业务指标

| 指标名称 | 说明 | 目标值 | 计算方式 |
|---------|------|--------|----------|
| 日活跃用户(DAU) | 每日活跃用户数 | 增长 | 当日登录用户数 |
| 月活跃用户(MAU) | 每月活跃用户数 | 增长 | 当月登录用户数 |
| 测算转化率 | 注册后完成测算比例 | >40% | 测算用户/注册用户 |
| 付费转化率 | 付费用户比例 | >10% | 付费用户/总用户 |
| K因子 | 病毒传播系数 | >1.0 | 平均每用户带来新用户数 |
| 7日留存 | 7天后仍活跃比例 | >20% | 7天后活跃用户/新增用户 |

### 财务指标

| 指标名称 | 说明 | 目标 |
|---------|------|------|
| ARPU | 用户平均收益 | 增长 |
| LTV | 用户生命周期价值 | 最大化 |
| CAC | 用户获取成本 | 降低 |
| ROI | 投资回报率 | >300% |

---

## 🛠️ 常见问题

### Q1: 无法访问管理后台？
**A**: 
1. 确认使用正确的管理员账户
2. 清除浏览器缓存和Cookie
3. 检查网络连接
4. 尝试使用无痕模式

### Q2: 数据显示不正常？
**A**:
1. 刷新页面重新加载
2. 检查时间范围筛选
3. 查看浏览器控制台错误信息
4. 联系技术支持

### Q3: 如何导出数据报表？
**A**:
1. 进入对应数据模块
2. 设置筛选条件
3. 点击"导出"按钮
4. 选择导出格式（CSV/Excel）

### Q4: 如何给用户调整积分？
**A**:
1. 进入用户管理模块
2. 搜索目标用户
3. 点击"调整积分"
4. 输入调整数量和原因
5. 确认提交

---

## 📞 技术支持

### 获取帮助

1. **在线文档**: `/admin/docs`
2. **系统日志**: `/admin/audit`
3. **开发者工具**: 浏览器 F12
4. **技术支持邮箱**: support@qiflowai.com

### 报告问题

提交问题时请包含：
- 问题描述
- 复现步骤
- 错误截图
- 浏览器版本
- 操作系统信息

---

## 🎓 最佳实践

### 日常运营

1. **每日检查**:
   - 查看仪表板数据
   - 检查系统异常告警
   - 处理用户反馈

2. **每周分析**:
   - 分析用户增长趋势
   - 评估营销活动效果
   - 优化运营策略

3. **每月总结**:
   - 生成月度运营报表
   - 分析收益情况
   - 制定下月计划

### 数据管理

1. **定期备份**:
   - 每日自动备份数据库
   - 保留至少30天备份
   - 测试备份恢复流程

2. **数据安全**:
   - 遵守数据保护法规
   - 加密敏感信息
   - 限制数据访问权限

---

## 📝 更新日志

### v5.1.1 (2025-01-11)
- ✅ 完成管理后台业务适配
- ✅ 更新为QiFlow AI业务模块
- ✅ 添加八字、风水、罗盘、AI对话管理
- ✅ 优化数据统计展示
- ✅ 更新侧边栏菜单结构

### v5.0.0
- 🎉 系统正式上线
- ✨ 实现核心业务功能
- 🔐 完成认证和权限系统
- 📊 上线数据分析模块

---

## ✅ 系统状态

🟢 **系统正常运行**

- 管理后台: ✅ 正常
- 数据库: ✅ 正常
- API服务: ✅ 正常
- 支付系统: ✅ 正常

---

*最后更新: 2025-01-11*
*文档版本: v5.1.1*
