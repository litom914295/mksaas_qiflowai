# 首页表单优化 - 测试清单

## 🧪 手动测试步骤

### 准备工作
1. ✅ 运行开发服务器：`npm run dev`
2. ✅ 打开首页：`http://localhost:3000`
3. ✅ 清除浏览器缓存（Ctrl + Shift + Delete）

---

## ✅ 测试项目

### 1. 城市字段检查
- [ ] 标签显示为"出生城市"
- [ ] 包含"(真太阳时)"提示文字
- [ ] 字段为可选（没有红色*）
- [ ] 输入框placeholder显示"如: 北京"

**预期结果**：
```
[🗺️] 出生城市 (真太阳时)
[输入框: 如: 北京]
```

---

### 2. 阴阳历选择器位置
- [ ] 选择器位于"出生日期"标签右侧
- [ ] 与标签之间有适当间距（gap-4）
- [ ] 不是靠右对齐
- [ ] 点击顺手，无需大幅移动鼠标

**预期结果**：
```
[📅] 出生日期 * [○ 阳历] [○ 阴历]
[年份▼] [月份▼] [日期▼]
```

---

### 3. 出生时间必填标记
- [ ] 标签显示"出生时间"
- [ ] 包含红色 * 必填标记
- [ ] 没有"(可选)"文字

**预期结果**：
```
[🕐] 出生时间 *
```

---

### 4. 时段快捷按钮
- [ ] 显示4个并列按钮
- [ ] 按钮包含：上午、下午、晚上、精确
- [ ] 上午按钮显示"(辰时-巳时)"
- [ ] 下午按钮显示"(未时-申时)"
- [ ] 晚上按钮显示"(戌时-亥时)"
- [ ] 精确按钮显示"精确" "时间"（两行）
- [ ] 默认选中"上午"（有边框和背景色）

**预期结果**：
```
┌─────────┬─────────┬─────────┬─────────┐
│ ✓上午   │  下午   │  晚上   │  精确   │
│(辰-巳时)│(未-申时)│(戌-亥时)│  时间   │
└─────────┴─────────┴─────────┴─────────┘
⚡ 已选择 上午，默认时间为 08:00
```

---

### 5. 时段按钮交互
**测试步骤**：
1. [ ] 点击"下午"按钮
   - 按钮获得选中样式
   - 下方显示"已选择 下午，默认时间为 14:00"
   
2. [ ] 点击"晚上"按钮
   - 按钮获得选中样式
   - 下方显示"已选择 晚上，默认时间为 20:00"

3. [ ] 回到"上午"
   - 恢复到默认状态

**预期**：每次点击都有即时反馈

---

### 6. 精确时间选择
**测试步骤**：
1. [ ] 点击"精确时间"按钮
   - 按钮获得选中样式
   - 下方出现两个输入框并列显示

2. [ ] 检查左侧时辰下拉菜单
   - 打开下拉菜单
   - 看到12个时辰选项
   - 每个时辰显示名称和时间范围
   - 如："辰时 07:00-09:00"

3. [ ] 选择"午时"
   - 右侧时间自动变为"12:00"

4. [ ] 选择"亥时"
   - 右侧时间自动变为"22:00"

5. [ ] 手动修改右侧时间输入框
   - 可以输入任意时间（如 14:30）

**预期结果**：
```
[精确✓] 按钮选中

[辰时 07:00-09:00 ▼] [⏰ 08:00]
```

---

### 7. 十二时辰完整性检查
打开时辰下拉菜单，确认包含：
- [ ] 子时 23:00-01:00
- [ ] 丑时 01:00-03:00
- [ ] 寅时 03:00-05:00
- [ ] 卯时 05:00-07:00
- [ ] 辰时 07:00-09:00
- [ ] 巳时 09:00-11:00
- [ ] 午时 11:00-13:00
- [ ] 未时 13:00-15:00
- [ ] 申时 15:00-17:00
- [ ] 酉时 17:00-19:00
- [ ] 戌时 19:00-21:00
- [ ] 亥时 21:00-23:00

---

### 8. 默认值检查
**测试步骤**：
1. [ ] 刷新页面
2. [ ] 检查初始状态

**预期默认值**：
- 性别：女（选中）
- 历法：阳历（选中）
- 时间：上午（选中）
- 默认时间：08:00（显示在提示中）

---

### 9. 表单提交测试
**测试步骤**：
1. [ ] 填写姓名：测试用户
2. [ ] 选择性别：女（默认）
3. [ ] 选择出生日期：1990年1月1日
4. [ ] 保持时间为默认"上午"
5. [ ] 点击"开始分析"

**验证**：
- [ ] 页面跳转到分析页
- [ ] 控制台没有错误
- [ ] sessionStorage 包含正确数据

---

### 10. 数据传递验证
在浏览器控制台运行：
```javascript
JSON.parse(sessionStorage.getItem('analysisFormData'))
```

**预期输出**：
```javascript
{
  personal: {
    name: "测试用户",
    gender: "female",
    birthYear: "1990",
    birthMonth: "1",
    birthDay: "1",
    birthDate: "1990-01-01",
    birthTime: "08:00",  // ← 应该是默认时间
    birthCity: "",
    calendarType: "solar"
  }
}
```

---

### 11. 响应式测试
**测试步骤**：
1. [ ] 缩小浏览器窗口到手机尺寸
2. [ ] 检查时段按钮布局
3. [ ] 检查时辰下拉和时间输入是否正常

**预期**：
- 按钮可能堆叠成2行
- 所有元素可见且可点击
- 没有横向滚动条

---

### 12. 边界情况测试
1. [ ] 选择"精确时间"但不选时辰
   - 应使用默认时辰（辰时 08:00）

2. [ ] 选择时辰后再切换回"上午"
   - 应恢复为上午默认值（08:00）

3. [ ] 快速多次点击不同时段
   - 应正确响应每次点击
   - 没有UI闪烁或错误

---

## 🐛 常见问题排查

### 问题 1: 时辰下拉菜单不显示
**解决方案**：
- 检查是否点击了"精确时间"按钮
- 查看浏览器控制台是否有错误
- 确认 `time-constants.ts` 文件存在

### 问题 2: 默认时间没有更新
**解决方案**：
- 清除浏览器缓存
- 硬刷新页面（Ctrl + Shift + R）
- 检查 `getDefaultTimeForSimplePeriod` 函数

### 问题 3: 按钮样式不正确
**解决方案**：
- 确认 Tailwind CSS 正确加载
- 检查 `peer-data-[state=checked]` 样式是否生效
- 查看开发者工具的 Styles 面板

---

## ✅ 验收标准

全部测试项通过后，确认：

- ✅ 所有文字标签正确
- ✅ 必填/可选标记正确
- ✅ 默认值合理
- ✅ 交互流畅无卡顿
- ✅ 数据正确传递到下一页
- ✅ 无控制台错误
- ✅ 移动端显示正常

---

## 📸 截图清单

建议截图保存：
1. 首页初始状态（默认值）
2. 阴阳历选择器位置
3. 时段按钮默认状态
4. 时段按钮各选中状态
5. 精确时间选择界面
6. 十二时辰下拉菜单
7. 移动端显示效果

---

**测试完成后，在每个测试项前打 ✅ 标记！**
