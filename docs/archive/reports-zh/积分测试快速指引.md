# 🎯 积分测试快速指引

## ❗ 重要发现

### 管理员账号没有积分限制！

你当前使用的账号 `58462822@qq.com` 是**管理员账号** (`role='admin'`)，管理员账号**不受积分系统限制**，因此无法用来测试积分功能！

---

## 🚀 快速开始测试

### 步骤 1: 创建测试用户

```bash
npm run script:create-test-user
```

这会创建一个测试账号：
- **邮箱**: `test@example.com`
- **密码**: `test123456`
- **角色**: `user` (普通用户)

### 步骤 2: 添加测试积分

```bash
# 给测试账号添加 1000 积分
npm run add-credits test@example.com 1000
```

或者添加少量积分来测试"积分不足"的场景：

```bash
# 只添加 10 积分
npm run add-credits test@example.com 10
```

### 步骤 3: 使用测试账号登录

1. 退出管理员账号
2. 使用以下信息登录：
   - 邮箱: `test@example.com`
   - 密码: `test123456`

### 步骤 4: 测试功能

现在你可以测试以下功能了：

#### 测试积分扣除
- 使用 AI 聊天（消耗 5 积分）
- 使用深度解读（消耗 30 积分）
- 导出 PDF（消耗 5 积分）

#### 测试积分不足
如果只添加了 10 积分：
- 尝试使用深度解读（需要 30 积分）
- 应该看到「积分不足」的提示

---

## 📊 积分消耗一览

| 功能 | 消耗积分 |
|------|---------|
| AI 聊天 | 5 |
| 深度解读 | 30 |
| 八字测算 | 10 |
| 玄空风水 | 20 |
| PDF 导出 | 5 |

## 💰 积分获取方式

| 方式 | 获得积分 |
|------|---------|
| 注册赠送 | 70 |
| 每日签到 | 5 |
| 邀请好友（邀请人） | 15 |
| 邀请好友（被邀请人） | 20 |
| 分享奖励 | 5 |

---

## 🔍 查看和管理

### 查看所有用户

```bash
npm run list-users
```

### 验证积分一致性

```bash
npm run verify:credits
```

### 给其他用户添加积分

```bash
npm run add-credits <邮箱> <积分数量>

# 例如：
npm run add-credits mytest@example.com 500
```

---

## 🎭 测试场景建议

### 场景 1: 新用户体验
1. 通过前端注册新账号
2. 检查是否自动获得 70 注册积分
3. 测试使用各项功能

### 场景 2: 积分不足
1. 使用上面创建的测试账号（添加少量积分）
2. 尝试使用高消耗功能（如深度解读）
3. 验证提示和引导购买流程

### 场景 3: 积分消耗
1. 添加充足积分（如 1000）
2. 记录初始余额
3. 使用各项功能
4. 验证积分正确扣除

### 场景 4: 邀请奖励
1. 生成邀请链接
2. 用另一个邮箱注册
3. 检查双方积分变化

---

## ⚠️ 注意事项

1. **管理员账号** (`58462822@qq.com`) 无法测试积分限制
2. 新注册用户自动获得 **70 积分**
3. 测试账号可以重复使用
4. 可以随时添加/调整测试积分
5. 建议准备多个测试账号测试不同场景

---

## 🛠️ 脚本位置

- 创建测试用户: `scripts/create-test-user.ts`
- 添加积分: `scripts/add-test-credits.ts`
- 列出用户: `scripts/list-users.ts`
- 验证积分: `scripts/verify-credits-consistency.ts`

---

## 📚 完整文档

查看 `docs/测试账号使用指南.md` 了解更多详情。

---

**现在可以开始测试了！** 🎉
