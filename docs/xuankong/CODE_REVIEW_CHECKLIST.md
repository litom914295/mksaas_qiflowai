# 玄空飞星组件代码审查清单

## 代码质量

### TypeScript
- [ ] 所有函数和组件都有明确的类型定义
- [ ] 避免使用 `any` 类型（除非在测试中）
- [ ] 使用 `type` 而不是 `interface`（除非需要声明合并）
- [ ] 正确使用泛型提高代码复用性
- [ ] Props 类型定义完整且准确

### React 最佳实践
- [ ] 使用函数组件而不是类组件
- [ ] 正确使用 React Hooks
- [ ] 避免不必要的 re-render
- [ ] 使用 `React.memo` 优化性能关键组件
- [ ] 正确处理副作用（useEffect）
- [ ] 清理订阅和定时器

### 代码风格
- [ ] 遵循项目的命名约定
- [ ] 文件和目录命名使用 kebab-case
- [ ] 组件命名使用 PascalCase
- [ ] 函数和变量命名使用 camelCase
- [ ] 常量命名使用 UPPER_SNAKE_CASE
- [ ] 代码格式化符合 Prettier 规则

## 性能

### 渲染性能
- [ ] 避免在渲染函数中创建新对象或数组
- [ ] 使用 useMemo 缓存复杂计算
- [ ] 使用 useCallback 缓存回调函数
- [ ] 列表渲染使用唯一且稳定的 key
- [ ] 避免深层嵌套的组件结构

### 数据处理
- [ ] 大数据集使用虚拟滚动
- [ ] 复杂计算移至 Web Worker
- [ ] 使用防抖和节流优化高频操作
- [ ] 避免不必要的数据转换

### 资源加载
- [ ] 图片使用适当的格式和尺寸
- [ ] 实现懒加载和代码分割
- [ ] 异步加载非关键资源
- [ ] 使用 Suspense 处理异步组件

## 可访问性

### ARIA 属性
- [ ] 正确使用 ARIA 角色
- [ ] 提供 aria-label 和 aria-describedby
- [ ] 表单元素关联标签
- [ ] 交互元素具有可访问的名称

### 键盘导航
- [ ] 所有交互元素可通过键盘访问
- [ ] 实现正确的 Tab 顺序
- [ ] 支持常用键盘快捷键（Enter, Space, Escape）
- [ ] 焦点管理合理且可见

### 颜色和对比度
- [ ] 文本和背景的对比度符合 WCAG AA 标准
- [ ] 不仅依赖颜色传达信息
- [ ] 支持深色模式

## 测试

### 单元测试
- [ ] 核心业务逻辑有完整的单元测试
- [ ] 测试覆盖率 > 80%
- [ ] 测试边界情况和错误场景
- [ ] 使用有意义的测试描述

### 集成测试
- [ ] 组件交互流程有集成测试
- [ ] 测试组件间数据流
- [ ] 验证副作用和状态管理

### 端到端测试
- [ ] 关键用户流程有 E2E 测试
- [ ] 测试跨浏览器兼容性
- [ ] 测试响应式布局

## 安全性

### 输入验证
- [ ] 所有用户输入都经过验证
- [ ] 防止 XSS 攻击
- [ ] 防止 SQL 注入（如果适用）
- [ ] 敏感数据加密处理

### 权限和认证
- [ ] 检查用户权限
- [ ] 正确处理认证状态
- [ ] 保护敏感路由和数据

## 文档

### 代码注释
- [ ] 复杂逻辑有清晰的注释
- [ ] 公共 API 有 JSDoc 注释
- [ ] 注释解释"为什么"而不是"是什么"
- [ ] 没有过时或误导性的注释

### README 和文档
- [ ] 组件有使用文档
- [ ] API 文档完整
- [ ] 示例代码可运行
- [ ] 包含迁移指南（如果适用）

## 依赖管理

### 外部依赖
- [ ] 最小化外部依赖
- [ ] 使用的包是活跃维护的
- [ ] 检查安全漏洞
- [ ] 依赖版本固定或使用 lockfile

### 内部依赖
- [ ] 避免循环依赖
- [ ] 模块职责清晰
- [ ] 导入路径简洁明了

## 错误处理

### 错误边界
- [ ] 实现错误边界组件
- [ ] 优雅降级而不是崩溃
- [ ] 记录错误信息用于调试

### 用户反馈
- [ ] 加载状态有明确提示
- [ ] 错误信息友好且可操作
- [ ] 成功操作有确认反馈

## 国际化

### 文本翻译
- [ ] 所有用户可见文本使用翻译键
- [ ] 支持多语言切换
- [ ] 日期和数字格式本地化
- [ ] 处理 RTL 语言（如适用）

## Git 和版本控制

### 提交
- [ ] 提交信息清晰描述变更
- [ ] 每个提交只包含相关变更
- [ ] 不提交调试代码和临时文件

### 分支
- [ ] 功能分支命名规范
- [ ] PR 描述完整且链接相关 issue
- [ ] 代码审查意见得到处理

## 性能基准

### 关键指标
- [ ] 首次渲染 < 500ms
- [ ] 标签切换 < 100ms
- [ ] 综合分析 < 2秒
- [ ] 内存使用合理（无泄漏）

### 监控
- [ ] 集成性能监控工具
- [ ] 设置性能预算
- [ ] 定期进行性能审计

## 清单使用说明

1. **代码提交前**：开发者自查
2. **Pull Request**：审查者使用此清单
3. **发布前**：团队集体审查

### 严重程度级别

- 🔴 **阻断**：必须修复才能合并
- 🟡 **警告**：建议修复，可酌情延后
- 🟢 **建议**：改进建议，不影响合并

---

## 审查记录模板

```markdown
## 代码审查结果

**审查者**: [姓名]
**审查日期**: [YYYY-MM-DD]
**分支**: [分支名称]

### 检查结果

#### 代码质量 [通过/需改进]
- 

#### 性能 [通过/需改进]
- 

#### 可访问性 [通过/需改进]
- 

#### 测试 [通过/需改进]
- 

### 总体评价

[通过/需改进/拒绝]

### 备注

[其他说明]
```
