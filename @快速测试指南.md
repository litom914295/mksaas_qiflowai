# QiFlow 快速测试指南

## ⚡ 立即开始测试

### 1. 检查服务器 (1分钟)

```powershell
# 查看服务器状态
Get-Job

# 如果没有运行，启动它
Start-Job -ScriptBlock { Set-Location D:\test\mksaas_qiflowai; npm run dev }

# 等待30秒
Start-Sleep -Seconds 30
```

### 2. 直接打开浏览器 (立即)

**核心测试页面**：
- **Showcase**: http://localhost:3000/zh/showcase
- **飞星测试**: http://localhost:3000/zh/test-flying-star
- **八字分析**: http://localhost:3000/zh/analysis/bazi

**快速打开命令**：
```powershell
Start-Process "http://localhost:3000/zh/showcase"
Start-Process "http://localhost:3000/zh/test-flying-star"
```

### 3. 等待页面编译 (首次2-5分钟)

⚠️ **重要**: 第一次访问页面时，Next.js需要编译，会显示加载中。这是正常的！

**你会看到**：
- 浏览器显示 "Compiling..." 或加载动画
- 等待2-5分钟
- 页面自动显示内容

**如果超过5分钟**：
- 刷新页面（F5）
- 检查控制台（F12）是否有错误
- 查看下面的故障排除

---

## 🧪 测试项目

### A. Showcase页面测试

**访问**: http://localhost:3000/zh/showcase

**检查项目**：
1. ✓ 页面正常加载，无报错
2. ✓ 顶部显示"QiFlow 功能展示"标题
3. ✓ 4个统计卡片正常显示
4. ✓ 加载动画演示 - 点击按钮查看
5. ✓ 错误提示演示 - 点击不同按钮查看info/warning/error/critical
6. ✓ **飞星网格** - 九宫格显示完整
7. ✓ 骨架屏加载效果
8. ✓ 底部功能链接按钮

**飞星网格重点测试**：
- [ ] 九宫格3x3布局清晰
- [ ] 每宫显示三个星（运星、山星、向星）
- [ ] 宫位名称正确（坎、坤、震、巽、中、乾、兑、艮、离）
- [ ] 点击任意宫位可以展开详情
- [ ] 详情面板显示飞星组合解读
- [ ] 吉凶评级显示（大吉/吉/平/凶/大凶）
- [ ] 有具体的影响说明和风水建议

### B. 飞星测试页面

**访问**: http://localhost:3000/zh/test-flying-star

**检查项目**：
1. ✓ 页面标题"飞星组件测试"
2. ✓ 飞星网格显示
3. ✓ 点击宫位，下方显示"选中的宫位：X"
4. ✓ 交互流畅，无延迟

### C. 响应式测试

**桌面端** (默认):
- [ ] 布局宽敞，间距合理
- [ ] 文字清晰易读
- [ ] 网格整齐排列

**平板端** (F12 → 设备模式 → iPad):
- [ ] 布局自动调整
- [ ] 触控区域足够大
- [ ] 内容不拥挤

**手机端** (F12 → 设备模式 → iPhone SE):
- [ ] 单列布局
- [ ] 字体大小适中
- [ ] 无横向滚动
- [ ] 按钮易于点击

---

## 🔧 故障排除

### 问题1: 页面一直显示"Compiling..."

**原因**: Next.js首次编译耗时长  
**解决**:
```powershell
# 查看编译日志
Receive-Job -Id (Get-Job)[0].Id -Keep | Select-Object -Last 20

# 如果看到"Compiled successfully"，刷新浏览器
# 如果看到错误，记录错误信息
```

### 问题2: 页面显示502错误

**原因**: 服务器正在启动或编译中  
**解决**:
```powershell
# 等待2分钟
Start-Sleep -Seconds 120

# 刷新浏览器
# F5
```

### 问题3: 服务器没有运行

**检查**:
```powershell
Get-Job
# 应该看到一个Running状态的Job
```

**重启**:
```powershell
# 停止旧的
Get-Job | Stop-Job
Get-Job | Remove-Job -Force

# 启动新的
Start-Job -ScriptBlock { Set-Location D:\test\mksaas_qiflowai; npm run dev }

# 等待30秒
Start-Sleep -Seconds 30
```

### 问题4: 端口被占用

**检查端口**:
```powershell
Get-NetTCPConnection -LocalPort 3000 -ErrorAction SilentlyContinue
```

**如果被占用**:
```powershell
# 杀掉占用3000端口的进程
Stop-Process -Id (Get-NetTCPConnection -LocalPort 3000).OwningProcess -Force

# 重启服务器
Start-Job -ScriptBlock { Set-Location D:\test\mksaas_qiflowai; npm run dev }
```

---

## 📸 测试截图建议

建议截图保存以下内容：

1. **Showcase整体页面** - 展示完整功能
2. **飞星网格** - 九宫格布局
3. **飞星详情面板** - 点击后的详细解读
4. **移动端视图** - F12设备模式
5. **控制台状态** - F12 Console，证明无错误

---

## 🎯 测试成功标准

### 必须达成 ✅
- [ ] Showcase页面正常加载
- [ ] 飞星网格正确显示（3x3布局）
- [ ] 点击宫位可展开详情
- [ ] 详情面板显示完整内容
- [ ] 控制台无红色错误

### 期望达成 ⭐
- [ ] 所有UI组件显示正常
- [ ] 响应式布局完美适配
- [ ] 交互流畅无卡顿
- [ ] 飞星解读内容专业准确

---

## 📊 性能预期

| 指标 | 首次访问 | 二次访问 | 说明 |
|------|---------|---------|------|
| 页面加载 | 30-120秒 | 1-3秒 | 首次需编译 |
| 点击响应 | <100ms | <50ms | 交互延迟 |
| 切换宫位 | <200ms | <100ms | 状态更新 |

---

## 💡 测试技巧

### 快速验证
1. **先访问一个页面**，等待编译完成
2. **成功后再访问其他页面**，会快很多
3. **使用F12控制台**实时查看错误

### 设备模式测试
```
F12 → Ctrl+Shift+M → 选择设备
或者
F12 → 左上角设备图标
```

### 常用快捷键
- `F5` - 刷新页面
- `Ctrl+Shift+R` - 硬刷新（清除缓存）
- `F12` - 开发者工具
- `Ctrl+Shift+M` - 设备模式
- `Ctrl+Shift+C` - 选择元素

---

## 📝 测试报告模板

完成测试后，记录结果：

```markdown
## 测试结果

**测试时间**: 2025-10-04  
**测试人**: [你的名字]  
**浏览器**: Chrome / Firefox / Edge

### Showcase页面
- [ ] 通过 / [ ] 失败
- 问题：[如有]

### 飞星测试页面
- [ ] 通过 / [ ] 失败
- 问题：[如有]

### 响应式测试
- 桌面: [ ] 通过 / [ ] 失败
- 平板: [ ] 通过 / [ ] 失败
- 手机: [ ] 通过 / [ ] 失败

### 发现的问题
1. [问题描述]
2. [问题描述]

### 总体评价
[好/中/差]，[原因]
```

---

## 🚀 下一步

测试完成后：

1. **如果成功** ✅
   - 记录测试结果
   - 保存截图
   - 继续功能开发

2. **如果有问题** ❌
   - 记录具体错误信息
   - 截图错误页面
   - 查看控制台错误
   - 报告问题详情

---

## 📞 快速命令速查

```powershell
# 查看服务器状态
Get-Job

# 查看日志
Receive-Job -Id (Get-Job)[0].Id -Keep | Select-Object -Last 30

# 打开浏览器
Start-Process "http://localhost:3000/zh/showcase"

# 测试连接
curl.exe http://localhost:3000 --max-time 5

# 重启服务器
Get-Job | Stop-Job; Get-Job | Remove-Job -Force
Start-Job -ScriptBlock { Set-Location D:\test\mksaas_qiflowai; npm run dev }
```

---

**状态**: ✅ 准备就绪，可以开始测试  
**建议**: 先访问Showcase页面，等待编译完成后再测试其他页面
