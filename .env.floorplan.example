# ============================================
# 户型叠加持久化功能 - 环境变量配置示例
# ============================================
# 版本: v5.1.1
# 说明: 复制此文件为 .env.local 并根据实际情况修改配置

# ============================================
# 功能总开关
# ============================================

# 是否启用户型叠加持久化功能
# 设置为 false 可完全禁用此功能
NEXT_PUBLIC_FLOORPLAN_ENABLED=true

# ============================================
# 云存储配置
# ============================================

# 是否启用云存储（设置为 false 则全部使用 Base64）
NEXT_PUBLIC_CLOUD_UPLOAD_ENABLED=true

# 免费用户云存储策略
# - allow: 允许云上传
# - deny: 禁止云上传，强制使用 Base64
# - auto: 根据配额和成本自动决定
NEXT_PUBLIC_CLOUD_FREE_TIER=allow

# 最大图片大小（MB）
NEXT_PUBLIC_MAX_IMAGE_SIZE_MB=10

# 最大图片尺寸（像素）
NEXT_PUBLIC_MAX_IMAGE_DIMENSION=4096

# ============================================
# 云存储服务商配置
# ============================================

# ---------- Cloudflare R2 ----------
# R2_ACCOUNT_ID=your_account_id
# R2_ACCESS_KEY_ID=your_access_key
# R2_SECRET_ACCESS_KEY=your_secret_key
# R2_BUCKET_NAME=floorplans
# R2_PUBLIC_URL=https://your-bucket.r2.dev

# ---------- AWS S3 ----------
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_S3_BUCKET=your_bucket_name

# ---------- Supabase Storage ----------
# SUPABASE_URL=https://your-project.supabase.co
# SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
# SUPABASE_BUCKET_NAME=floorplans

# ============================================
# 配额限制
# ============================================

# 每用户最大方案数量
NEXT_PUBLIC_MAX_PLANS_PER_USER=10

# localStorage 警告阈值（百分比，0-100）
# 当使用率超过此值时显示警告
NEXT_PUBLIC_STORAGE_WARNING_THRESHOLD=80

# 自动清理天数
# 超过此天数未访问的缓存将被自动清理
NEXT_PUBLIC_AUTO_CLEAN_DAYS=90

# ============================================
# 性能配置
# ============================================

# 防抖延迟（毫秒）
# 连续操作间隔小于此值时合并为一次保存
NEXT_PUBLIC_DEBOUNCE_MS=300

# 自动保存间隔（毫秒）
# 设置为 0 禁用自动保存
NEXT_PUBLIC_AUTO_SAVE_INTERVAL=10000

# 图片压缩质量（0-1）
# 值越大质量越高但文件越大
NEXT_PUBLIC_COMPRESSION_QUALITY=0.85

# ============================================
# 功能开关
# ============================================

# 是否启用匿名用户迁移
# 登录后自动将 localStorage 数据迁移到数据库
NEXT_PUBLIC_ENABLE_ANONYMOUS_MIGRATION=true

# 是否启用方案管理器
# 显示方案列表、创建、重命名、删除功能
NEXT_PUBLIC_ENABLE_PLAN_MANAGER=true

# 是否启用离线模式
# 离线时排队，恢复网络后自动同步
NEXT_PUBLIC_ENABLE_OFFLINE_MODE=true

# ============================================
# 灰度发布配置示例
# ============================================

# ---------- 开发环境（全部启用）----------
# NEXT_PUBLIC_FLOORPLAN_ENABLED=true
# NEXT_PUBLIC_CLOUD_UPLOAD_ENABLED=true
# NEXT_PUBLIC_CLOUD_FREE_TIER=allow
# NEXT_PUBLIC_MAX_PLANS_PER_USER=10

# ---------- 测试环境（Base64 模式）----------
# NEXT_PUBLIC_FLOORPLAN_ENABLED=true
# NEXT_PUBLIC_CLOUD_UPLOAD_ENABLED=false
# NEXT_PUBLIC_CLOUD_FREE_TIER=deny
# NEXT_PUBLIC_MAX_PLANS_PER_USER=5

# ---------- 生产环境（灰度发布）----------
# 阶段 1: 仅 Base64，限制方案数
# NEXT_PUBLIC_FLOORPLAN_ENABLED=true
# NEXT_PUBLIC_CLOUD_UPLOAD_ENABLED=false
# NEXT_PUBLIC_CLOUD_FREE_TIER=deny
# NEXT_PUBLIC_MAX_PLANS_PER_USER=3

# 阶段 2: 开启云存储，扩大配额
# NEXT_PUBLIC_FLOORPLAN_ENABLED=true
# NEXT_PUBLIC_CLOUD_UPLOAD_ENABLED=true
# NEXT_PUBLIC_CLOUD_FREE_TIER=auto
# NEXT_PUBLIC_MAX_PLANS_PER_USER=5

# 阶段 3: 全量开放
# NEXT_PUBLIC_FLOORPLAN_ENABLED=true
# NEXT_PUBLIC_CLOUD_UPLOAD_ENABLED=true
# NEXT_PUBLIC_CLOUD_FREE_TIER=allow
# NEXT_PUBLIC_MAX_PLANS_PER_USER=10

# ============================================
# 数据库配置（已存在，仅供参考）
# ============================================
# DATABASE_URL=postgresql://user:password@localhost:5432/dbname

# ============================================
# 监控与日志（可选）
# ============================================
# ENABLE_FLOORPLAN_LOGGING=true
# ENABLE_FLOORPLAN_METRICS=true
# SENTRY_DSN=your_sentry_dsn

# ============================================
# 回滚应急配置
# ============================================
# 如果功能出现问题，可以快速禁用
# NEXT_PUBLIC_FLOORPLAN_ENABLED=false
# NEXT_PUBLIC_CLOUD_UPLOAD_ENABLED=false
