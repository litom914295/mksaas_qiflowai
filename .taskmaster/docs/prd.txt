# PRD: 修复项目 i18n 翻译键问题

## 1. 项目背景
当前项目从 qiflow-ai 迁移过来，存在大量 i18n 翻译键缺失或不匹配的问题，导致 TypeScript 编译错误达 458 个。需要系统地修复这些翻译相关的问题。

## 2. 目标
- 修复所有 i18n 相关的 TypeScript 类型错误
- 确保所有组件使用的翻译键都存在于翻译文件中
- 统一翻译键的命名规范
- 支持中英文双语

## 3. 核心功能需求

### 3.1 翻译文件审计
- 扫描所有 .tsx 和 .ts 文件，提取所有使用 t() 函数的翻译键
- 对比翻译文件 (messages/zh-CN.json, messages/en.json)
- 生成缺失翻译键的报告

### 3.2 翻译键补全
- 为缺失的翻译键添加默认值
- 从原项目 qiflow-ai/src/locales 中查找对应的翻译
- 对于找不到的键，生成占位符翻译

### 3.3 类型定义修复
- 修复 i18n 类型定义，确保所有翻译键都被正确识别
- 处理命名空间相关的类型错误
- 修复 useTranslations hook 的类型问题

### 3.4 组件翻译修复
优先级排序：
1. guest-analysis 相关组件（已部分完成）
2. admin 组件（users-table 等）
3. settings 组件（credit-transactions-table 等）
4. layout 组件（theme-selector 等）
5. 其他业务组件

### 3.5 测试文件处理
- 测试文件中的翻译键错误可以暂时忽略或使用 mock
- 但主要业务代码必须完全修复

## 4. 技术要求

### 4.1 翻译文件格式
```json
{
  "namespace": {
    "key": "翻译文本",
    "nested": {
      "subkey": "嵌套翻译"
    }
  }
}
```

### 4.2 使用方式
```typescript
const t = useTranslations();
t('namespace.key');
t('namespace.nested.subkey');
```

### 4.3 支持的语言
- zh-CN (简体中文) - 主要语言
- en (英语) - 次要语言

## 5. 验收标准
- [ ] TypeScript 编译无 i18n 相关错误
- [ ] 所有组件中使用的翻译键都存在
- [ ] 中英文翻译完整
- [ ] 开发服务器可以正常启动
- [ ] guest-analysis 页面功能正常

## 6. 技术栈
- next-intl for i18n
- TypeScript
- Next.js App Router
- React

## 7. 约束条件
- 不修改组件逻辑，只修复翻译相关问题
- 保持原有的翻译键命名规范
- 优先从原项目复制翻译，其次才是创建新翻译
