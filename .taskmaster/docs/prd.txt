QiFlow AI八字风水网站改造项目需求文档

项目概述：
对现有的基于mksaas模板的AI八字风水网站进行全面改造和优化，提升代码质量、性能表现和用户体验。项目已有基础功能完成，需要进行架构优化、代码清理和功能完善。

核心目标：
1. 清理项目结构，提高代码可维护性
2. 优化性能，充分利用Next.js 15的RSC特性
3. 完善核心功能（八字分析、玄空风水、AI对话）
4. 建立规范的开发流程和代码标准

功能需求：

第一阶段 - 项目清理和结构优化：
- 清理根目录的24个临时文档文件，归档到docs/archive目录
- 删除备份文件（page-backup.tsx、page-simple.tsx等）
- 整理测试文件到专门的tests目录
- 建立清晰的文件命名和组织规范

第二阶段 - 代码质量提升：
- 修复300+个lint错误，主要处理硬编码中文字符串
- 将所有中文文案迁移到i18n国际化系统
- 清理未使用的依赖包（fabric、konva等）
- 统一代码风格，使用biome进行格式化

第三阶段 - 性能优化：
- 将非交互组件改造为React Server Components
- 移除不必要的'use client'指令（当前有20+个）
- 对大型组件实施动态导入和代码分割
- 优化图片加载，使用next/image组件
- 实现适当的缓存策略

第四阶段 - 核心功能完善：
- 完善AI对话系统的后端集成
- 实现完整的计费系统（包含三级降级策略）
- 优化八字分析页面的用户体验
- 增强玄空风水的展示效果
- 实现用户认证和权限管理

第五阶段 - 用户体验优化：
- 优化首页加载速度和转化率
- 改进移动端交互体验
- 实现更好的错误处理和用户反馈
- 添加骨架屏和加载状态
- 优化表单验证和提交流程

第六阶段 - 监控和分析：
- 集成性能监控工具
- 实现用户行为追踪
- 建立错误日志系统
- 创建数据分析仪表板

技术要求：
- 框架：Next.js 15.5.2
- 语言：TypeScript
- UI：Tailwind CSS + Shadcn UI
- 数据库：PostgreSQL + Drizzle ORM
- AI集成：支持多模型（OpenAI、DeepSeek等）

非功能性要求：
- 首屏加载时间 < 2秒
- Lighthouse性能分数 > 90
- TypeScript类型覆盖率 > 95%
- 代码测试覆盖率 > 80%
- 支持SEO优化和社交分享

验收标准：
- 所有lint错误修复完成
- 构建无错误通过
- 核心功能正常运行
- 性能指标达标
- 用户体验流畅

项目约束：
- 保持现有功能不受影响
- 分阶段实施，避免大规模重构
- 优先保证生产环境稳定
- 遵循Next.js最佳实践

交付物：
- 清理后的项目代码
- 优化后的组件库
- 完整的文档说明
- 自动化测试套件
- 部署和维护指南