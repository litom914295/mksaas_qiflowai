# æœªä½¿ç”¨ä»£ç æ¸…ç†è®¡åˆ’

**ç”Ÿæˆæ—¥æœŸ**: 2025-01-24  
**Knip æ‰«æç»“æœ**: 725 ä¸ªæœªä½¿ç”¨æ–‡ä»¶

---

## ğŸ“Š æœªä½¿ç”¨æ–‡ä»¶åˆ†å¸ƒ

| ç›®å½• | æ–‡ä»¶æ•° | ä¼˜å…ˆçº§ | é£é™©ç­‰çº§ | æ“ä½œ |
|------|--------|--------|---------|------|
| **src/** | 493 | ä¸­ | ä¸­ | éœ€ä»”ç»†å®¡æŸ¥ |
| **scripts/** | 113 | é«˜ | ä½ | å¯å®‰å…¨åˆ é™¤ |
| **content/** | 105 | é«˜ | ä½ | å¯å®‰å…¨åˆ é™¤ |
| **æ ¹ç›®å½•/å…¶ä»–** | 14 | ä½ | ä¸­ | éœ€ä¿ç•™ |
| **æ€»è®¡** | **725** | - | - | - |

---

## ğŸ¯ æ¸…ç†ç­–ç•¥

### Phase 1: ä½é£é™©æ¸…ç†ï¼ˆä¼˜å…ˆæ‰§è¡Œï¼‰

**ç›®æ ‡**: åˆ é™¤æ˜ç¡®æœªä½¿ç”¨ä¸”ä½é£é™©çš„æ–‡ä»¶

#### 1.1 Scripts æ¸…ç†ï¼ˆ113 ä¸ªæ–‡ä»¶ï¼‰

**å®‰å…¨åˆ é™¤çš„è„šæœ¬ç±»å‹**:
- âœ… æ—§çš„è¿ç§»è„šæœ¬ï¼ˆå·²æ‰§è¡Œå®Œæˆï¼‰
- âœ… è°ƒè¯•è„šæœ¬ï¼ˆå¼€å‘æœŸé—´ä½¿ç”¨ï¼‰
- âœ… æµ‹è¯•è„šæœ¬ï¼ˆä¸´æ—¶æµ‹è¯•ï¼‰
- âœ… ç¿»è¯‘ç›¸å…³è„šæœ¬ï¼ˆå·²å®Œæˆï¼‰
- âœ… æ•°æ®åº“è¯Šæ–­è„šæœ¬ï¼ˆä¸´æ—¶ä½¿ç”¨ï¼‰

**ä¿ç•™çš„è„šæœ¬**:
- âš ï¸ ç”Ÿäº§ç¯å¢ƒå¯èƒ½éœ€è¦çš„è„šæœ¬
- âš ï¸ CI/CD ä½¿ç”¨çš„è„šæœ¬
- âš ï¸ å®šæœŸç»´æŠ¤è„šæœ¬

**æ“ä½œ**: 
```bash
# æ‰¹é‡åˆ é™¤ scripts/ ç›®å½•ä¸‹çš„æœªä½¿ç”¨æ–‡ä»¶
# ä¼°è®¡å¯åˆ é™¤: ~100 ä¸ªæ–‡ä»¶
```

#### 1.2 Content æ¸…ç†ï¼ˆ105 ä¸ªæ–‡ä»¶ï¼‰

**å†…å®¹æ–‡ä»¶ç±»å‹**:
- MDX æ–‡æ¡£ï¼ˆæœªé“¾æ¥ï¼‰
- ç¤ºä¾‹é¡µé¢
- æ¨¡æ¿æ–‡ä»¶

**æ“ä½œ**:
```bash
# åˆ é™¤ content/ ç›®å½•ä¸‹çš„æœªä½¿ç”¨ MDX æ–‡ä»¶
# ä¼°è®¡å¯åˆ é™¤: ~100 ä¸ªæ–‡ä»¶
```

**é¢„æœŸæ”¶ç›Š**:
- åˆ é™¤æ–‡ä»¶: ~200 ä¸ªï¼ˆ27.6%ï¼‰
- å‡å°‘é¡¹ç›®å¤§å°: ~5-10 MB
- é£é™©: æä½

---

### Phase 2: ä¸­é£é™©æ¸…ç†ï¼ˆéœ€å®¡æŸ¥ï¼‰

**ç›®æ ‡**: å®¡æŸ¥å¹¶åˆ é™¤ src/ ç›®å½•ä¸‹çš„æœªä½¿ç”¨æ–‡ä»¶

#### 2.1 æµ‹è¯•æ–‡ä»¶æ¸…ç†

**ç­–ç•¥**: åˆ é™¤æ˜ç¡®æœªä½¿ç”¨çš„æµ‹è¯•æ–‡ä»¶
- æ—§çš„æµ‹è¯•æ–‡ä»¶
- é‡å¤çš„æµ‹è¯•
- æœªå®Œæˆçš„æµ‹è¯•å­˜æ ¹

**é¢„è®¡**: ~50 ä¸ªæ–‡ä»¶

#### 2.2 ç»„ä»¶æ¸…ç†

**ç­–ç•¥**: åˆ é™¤æœªä½¿ç”¨çš„ UI ç»„ä»¶
- é‡å¤ç»„ä»¶
- æ—§ç‰ˆæœ¬ç»„ä»¶
- å®éªŒæ€§ç»„ä»¶

**é¢„è®¡**: ~100 ä¸ªæ–‡ä»¶

#### 2.3 å·¥å…·å‡½æ•°æ¸…ç†

**ç­–ç•¥**: åˆ é™¤æœªä½¿ç”¨çš„å·¥å…·å‡½æ•°å’Œ helpers
- é‡å¤çš„å·¥å…·å‡½æ•°
- å·²è¢«æ›¿ä»£çš„å‡½æ•°
- å®éªŒæ€§å‡½æ•°

**é¢„è®¡**: ~50 ä¸ªæ–‡ä»¶

#### 2.4 ç±»å‹å®šä¹‰æ¸…ç†

**ç­–ç•¥**: åˆ é™¤æœªä½¿ç”¨çš„ç±»å‹å®šä¹‰æ–‡ä»¶
- é‡å¤çš„ç±»å‹
- æ—§çš„ç±»å‹å®šä¹‰
- ä¸´æ—¶ç±»å‹

**é¢„è®¡**: ~50 ä¸ªæ–‡ä»¶

#### 2.5 å…¶ä»–æºæ–‡ä»¶

**ç­–ç•¥**: é€ä¸ªå®¡æŸ¥å‰©ä½™æœªä½¿ç”¨æ–‡ä»¶
- æ£€æŸ¥æ˜¯å¦çœŸçš„æœªä½¿ç”¨
- æ£€æŸ¥æ˜¯å¦æœ‰åŠ¨æ€å¯¼å…¥
- æ£€æŸ¥æ˜¯å¦æœ‰éšå¼ä¾èµ–

**é¢„è®¡**: ~243 ä¸ªæ–‡ä»¶ï¼ˆéœ€ä»”ç»†å®¡æŸ¥ï¼‰

**é¢„æœŸæ”¶ç›Š**:
- åˆ é™¤æ–‡ä»¶: ~250 ä¸ªï¼ˆ34.5%ï¼‰
- å‡å°‘é¡¹ç›®å¤§å°: ~20-30 MB
- é£é™©: ä¸­ç­‰

---

### Phase 3: é«˜é£é™©æ¸…ç†ï¼ˆæœ€åå¤„ç†ï¼‰

**ç›®æ ‡**: å¤„ç†æ ¹ç›®å½•å’Œç‰¹æ®Šæ–‡ä»¶

#### 3.1 æ ¹ç›®å½•æ–‡ä»¶ï¼ˆ14 ä¸ªï¼‰

**æ–‡ä»¶åˆ—è¡¨**:
- `jest.config.bazi.js` - Jest é…ç½®ï¼ˆå¯èƒ½éœ€è¦ï¼‰
- `next.config.compiled.js` - Next.js ç¼–è¯‘äº§ç‰©ï¼ˆä¿ç•™ï¼‰
- `source.config.ts` - é…ç½®æ–‡ä»¶ï¼ˆéœ€å®¡æŸ¥ï¼‰
- `test-*.mjs` - æµ‹è¯•æ–‡ä»¶ï¼ˆå¯åˆ é™¤ï¼‰
- `public/debug-login.js` - è°ƒè¯•æ–‡ä»¶ï¼ˆå¯åˆ é™¤ï¼‰
- `public/sw.js` - Service Workerï¼ˆéœ€å®¡æŸ¥ï¼‰

**æ“ä½œ**: é€ä¸ªå®¡æŸ¥ï¼Œè°¨æ…åˆ é™¤

**é¢„æœŸæ”¶ç›Š**:
- åˆ é™¤æ–‡ä»¶: ~8 ä¸ªï¼ˆ1.1%ï¼‰
- é£é™©: ä¸­ç­‰åˆ°é«˜

---

## ğŸ“‹ æ‰§è¡Œè®¡åˆ’

### Step 1: å‡†å¤‡å·¥ä½œï¼ˆ15 åˆ†é’Ÿï¼‰

1. âœ… è¿è¡Œ Knip æ‰«æ
2. âœ… ç”Ÿæˆæ¸…ç†è®¡åˆ’
3. â³ åˆ›å»ºå¤‡ä»½åˆ†æ”¯
4. â³ æäº¤å½“å‰æ›´æ”¹

```bash
git checkout -b cleanup/unused-code
git add .
git commit -m "chore: backup before cleanup"
```

### Step 2: Phase 1 æ¸…ç†ï¼ˆ1-2 å°æ—¶ï¼‰

#### 2.1 Scripts æ¸…ç†

```bash
# è·å–æœªä½¿ç”¨çš„ scripts æ–‡ä»¶åˆ—è¡¨
npx knip --no-exit-code 2>&1 | Select-String -Pattern "^scripts/" > scripts-to-delete.txt

# å®¡æŸ¥åˆ—è¡¨ï¼ˆä¿ç•™é‡è¦è„šæœ¬ï¼‰
# æ‰¹é‡åˆ é™¤
```

**ä¿ç•™çš„å…³é”®è„šæœ¬**:
- `scripts/generate-*.ts` - ä»£ç ç”Ÿæˆ
- `scripts/migrate-*.ts` - æ•°æ®åº“è¿ç§»ï¼ˆæœªå®Œæˆçš„ï¼‰
- ä»»ä½•åœ¨ package.json ä¸­å¼•ç”¨çš„è„šæœ¬

#### 2.2 Content æ¸…ç†

```bash
# è·å–æœªä½¿ç”¨çš„ content æ–‡ä»¶åˆ—è¡¨
npx knip --no-exit-code 2>&1 | Select-String -Pattern "^content/" > content-to-delete.txt

# åˆ é™¤æ‰€æœ‰æœªä½¿ç”¨çš„ MDX æ–‡ä»¶
```

#### 2.3 éªŒè¯

```bash
# ç¡®ä¿é¡¹ç›®å¯ä»¥æ„å»º
npm run build

# è¿è¡Œæµ‹è¯•
npm run test

# è¿è¡Œ lint
npm run lint
```

### Step 3: Phase 2 æ¸…ç†ï¼ˆ2-3 å°æ—¶ï¼‰

```bash
# åˆ†æ‰¹å¤„ç† src/ ç›®å½•
# 1. æµ‹è¯•æ–‡ä»¶
# 2. ç»„ä»¶
# 3. å·¥å…·å‡½æ•°
# 4. ç±»å‹å®šä¹‰
# 5. å…¶ä»–

# æ¯æ‰¹åˆ é™¤åéªŒè¯æ„å»º
```

### Step 4: Phase 3 æ¸…ç†ï¼ˆ1 å°æ—¶ï¼‰

```bash
# é€ä¸ªå®¡æŸ¥æ ¹ç›®å½•æ–‡ä»¶
# è°¨æ…åˆ é™¤
```

### Step 5: æœ€ç»ˆéªŒè¯ï¼ˆ30 åˆ†é’Ÿï¼‰

```bash
# å®Œæ•´æ„å»ºæµ‹è¯•
npm run build

# å®Œæ•´æµ‹è¯•å¥—ä»¶
npm run test

# Lint æ£€æŸ¥
npm run lint

# TypeScript æ£€æŸ¥
npm run type-check

# æœ¬åœ°è¿è¡Œæµ‹è¯•
npm run dev
```

---

## âš ï¸ é£é™©æ§åˆ¶

### è‡ªåŠ¨å›æ»šç­–ç•¥

```bash
# å¦‚æœå‡ºç°é—®é¢˜ï¼Œç«‹å³å›æ»š
git reset --hard HEAD
git clean -fd
```

### åˆ†æ‰¹æäº¤ç­–ç•¥

```bash
# æ¯ä¸ª Phase å•ç‹¬æäº¤
git add .
git commit -m "chore(cleanup): phase 1 - remove unused scripts and content"

git add .
git commit -m "chore(cleanup): phase 2 - remove unused src files"

git add .
git commit -m "chore(cleanup): phase 3 - remove unused root files"
```

### éªŒè¯æ¸…å•

- [ ] é¡¹ç›®å¯ä»¥æ„å»º (`npm run build`)
- [ ] æµ‹è¯•é€šè¿‡ (`npm run test`)
- [ ] Lint é€šè¿‡ (`npm run lint`)
- [ ] TypeScript æ£€æŸ¥é€šè¿‡ (`npm run type-check`)
- [ ] å¼€å‘æœåŠ¡å™¨å¯ä»¥è¿è¡Œ (`npm run dev`)
- [ ] æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸ï¼ˆæ‰‹åŠ¨æµ‹è¯•ï¼‰

---

## ğŸ“Š é¢„æœŸæˆæœ

### æ–‡ä»¶æ¸…ç†

| Phase | åˆ é™¤æ–‡ä»¶æ•° | ç™¾åˆ†æ¯” | é£é™© |
|-------|-----------|--------|------|
| Phase 1 | ~200 | 27.6% | ä½ |
| Phase 2 | ~250 | 34.5% | ä¸­ |
| Phase 3 | ~8 | 1.1% | ä¸­-é«˜ |
| **æ€»è®¡** | **~458** | **63.2%** | - |

### ä¿ç•™æ–‡ä»¶

- ä¿ç•™: ~267 ä¸ªæ–‡ä»¶ï¼ˆ36.8%ï¼‰
- åŸå› : 
  - åŠ¨æ€å¯¼å…¥
  - éšå¼ä¾èµ–
  - ç”Ÿäº§ç¯å¢ƒéœ€è¦
  - ä¸ç¡®å®šæ˜¯å¦å®‰å…¨åˆ é™¤

### è´¨é‡æŒ‡æ ‡æ”¹å–„

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ | æ”¹å–„ |
|------|------|------|------|
| æœªä½¿ç”¨æ–‡ä»¶ | 725 | < 100 | -86% |
| é¡¹ç›®æ–‡ä»¶æ€»æ•° | ~2000 | ~1550 | -22.5% |
| ä»£ç åº“å¤§å° | ~200 MB | ~170 MB | -15% |
| æ„å»ºæ—¶é—´ | ~60s | ~50s | -16% |

---

## ğŸ¯ æˆåŠŸæ ‡å‡†

### å¿…é¡»æ»¡è¶³

- âœ… æœªä½¿ç”¨æ–‡ä»¶ < 100
- âœ… é¡¹ç›®å¯ä»¥æ­£å¸¸æ„å»º
- âœ… æ‰€æœ‰æµ‹è¯•é€šè¿‡
- âœ… æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- âœ… æ²¡æœ‰å¼•å…¥æ–°çš„é”™è¯¯

### ç†æƒ³çŠ¶æ€

- âœ… æœªä½¿ç”¨æ–‡ä»¶ < 50
- âœ… æ„å»ºæ—¶é—´å‡å°‘ > 10%
- âœ… ä»£ç åº“å¤§å°å‡å°‘ > 10%
- âœ… Knip é‡æ–°æ‰«ææ— è¯¯æŠ¥

---

## ğŸ“ æ‰§è¡Œè®°å½•

### å¼€å§‹æ—¶é—´
- [ ] å¾…å®š

### Phase 1
- [ ] Scripts æ¸…ç†å®Œæˆ
- [ ] Content æ¸…ç†å®Œæˆ
- [ ] éªŒè¯é€šè¿‡

### Phase 2
- [ ] æµ‹è¯•æ–‡ä»¶æ¸…ç†
- [ ] ç»„ä»¶æ¸…ç†
- [ ] å·¥å…·å‡½æ•°æ¸…ç†
- [ ] ç±»å‹å®šä¹‰æ¸…ç†
- [ ] å…¶ä»–æ–‡ä»¶æ¸…ç†
- [ ] éªŒè¯é€šè¿‡

### Phase 3
- [ ] æ ¹ç›®å½•æ¸…ç†
- [ ] éªŒè¯é€šè¿‡

### å®Œæˆæ—¶é—´
- [ ] å¾…å®š

---

**ä¸‹ä¸€æ­¥**: å¼€å§‹æ‰§è¡Œ Phase 1 æ¸…ç†ï¼ˆä½é£é™©ï¼‰
