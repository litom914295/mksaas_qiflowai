# QiFlow AI 生产环境配置模板
# 复制此文件为 .env.production 并填写实际值

# ========================================
# 应用基础配置
# ========================================
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://yourdomain.com
NEXT_PUBLIC_APP_NAME=QiFlow AI

# ========================================
# 数据库配置
# ========================================
DATABASE_URL=postgresql://user:password@host:5432/database
# 连接池配置
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# ========================================
# 认证配置
# ========================================
BETTER_AUTH_SECRET=your-32-character-secret-key-here
BETTER_AUTH_URL=https://yourdomain.com
SESSION_MAX_AGE=2592000

# ========================================
# OAuth 提供商（可选）
# ========================================
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# ========================================
# 支付配置
# ========================================
# Stripe
STRIPE_SECRET_KEY=sk_live_xxx
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# 微信支付
WECHAT_PAY_APP_ID=
WECHAT_PAY_MCH_ID=
WECHAT_PAY_API_KEY=

# 支付宝
ALIPAY_APP_ID=
ALIPAY_PRIVATE_KEY=
ALIPAY_PUBLIC_KEY=

# ========================================
# AI 服务配置
# ========================================
OPENAI_API_KEY=sk-xxx
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-4-turbo-preview

# Claude API
ANTHROPIC_API_KEY=sk-ant-xxx

# Deepseek API
DEEPSEEK_API_KEY=

# ========================================
# 云存储配置 (OSS/S3)
# ========================================
# AWS S3
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=

# 阿里云 OSS
ALIYUN_OSS_ACCESS_KEY_ID=
ALIYUN_OSS_ACCESS_KEY_SECRET=
ALIYUN_OSS_REGION=oss-cn-hangzhou
ALIYUN_OSS_BUCKET=

# ========================================
# 缓存配置 (Redis)
# ========================================
REDIS_URL=redis://user:password@host:6379
REDIS_TLS_ENABLED=true

# ========================================
# 邮件服务配置
# ========================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@yourdomain.com

# Resend API
RESEND_API_KEY=re_xxx

# ========================================
# 监控与日志配置
# ========================================
# Sentry 错误监控
NEXT_PUBLIC_SENTRY_DSN=https://xxx@o0000.ingest.sentry.io/0000
NEXT_PUBLIC_SENTRY_ENABLED=true
SENTRY_ORG=your-org
SENTRY_PROJECT=your-project
SENTRY_AUTH_TOKEN=

# 日志服务
LOG_LEVEL=info
LOG_SERVICE_ENABLED=true
LOG_SERVICE_ENDPOINT=https://logs.example.com
LOG_SERVICE_TOKEN=

# 性能监控
PERFORMANCE_MONITORING_ENABLED=true
METRICS_ENDPOINT=https://metrics.example.com
METRICS_TOKEN=

# ========================================
# 备份配置
# ========================================
BACKUP_DIR=/var/backups/qiflow
BACKUP_RETENTION_DAYS=30
BACKUP_UPLOAD_TO_CLOUD=true
BACKUP_S3_BUCKET=qiflow-backups

# ========================================
# 安全配置
# ========================================
# CORS 允许的域名
NEXT_PUBLIC_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=900000

# CSRF 保护
CSRF_SECRET=your-csrf-secret-key

# ========================================
# CDN 配置
# ========================================
NEXT_PUBLIC_CDN_URL=https://cdn.yourdomain.com
CDN_PURGE_TOKEN=

# ========================================
# 分析与追踪
# ========================================
# Google Analytics
NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX

# Vercel Analytics
NEXT_PUBLIC_VERCEL_ANALYTICS_ENABLED=true

# OpenPanel
NEXT_PUBLIC_OPENPANEL_CLIENT_ID=

# ========================================
# 功能开关
# ========================================
ENABLE_PAYMENT=true
ENABLE_ANALYTICS=true
ENABLE_AB_TESTING=false
ENABLE_ERROR_TRACKING=true
ENABLE_CREDITS=true

# ========================================
# 管理员配置
# ========================================
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PASSWORD=
ENABLE_ADMIN_PANEL=true

# ========================================
# 风控配置
# ========================================
REFERRAL_DAILY_LIMIT=3
REFERRAL_MONTHLY_LIMIT=40
SHARE_DAILY_LIMIT=1
SHARE_COOLDOWN_MINUTES=60

# ========================================
# Cron Jobs (可选)
# ========================================
CRON_SECRET=your-cron-secret-key
ENABLE_AUTO_BACKUP=true
BACKUP_SCHEDULE=0 2 * * *  # 每天凌晨2点
