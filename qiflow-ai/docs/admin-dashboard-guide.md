# 后台管理仪表板使用指南

## 概述

后台管理仪表板提供了完整的AI模型调用明细和费用统计功能，帮助管理员监控系统使用情况、分析成本、优化性能。

## 功能特性

### 📊 统计概览

- **总用户数**: 活跃用户统计
- **总会话数**: AI对话会话总数
- **总费用**: 累计AI模型调用费用
- **成功率**: AI调用成功率统计

### 📈 详细分析

- **每日统计**: 按日期查看使用趋势
- **提供商统计**: 各AI提供商使用情况对比
- **模型统计**: 具体模型使用频率和成本
- **用户统计**: 用户使用情况排行

### 🔍 详细记录

- **调用记录**: 完整的AI模型调用日志
- **错误追踪**: 失败调用的错误信息
- **性能监控**: 响应时间和Token使用统计
- **费用明细**: 每次调用的详细费用

## 访问权限

### 管理员权限

只有具有 `admin` 角色的用户才能访问后台管理功能。

### 权限验证

- 系统会自动验证用户身份和角色
- 未授权用户将被重定向到登录页面
- 非管理员用户将看到访问拒绝页面

## 使用指南

### 1. 访问后台管理

1. 使用管理员账户登录系统
2. 在导航栏中点击"后台管理"
3. 系统会自动验证权限并进入仪表板

### 2. 筛选数据

#### 日期范围筛选

- 选择开始和结束日期
- 系统会显示指定时间范围内的数据
- 默认显示最近30天的数据

#### 其他筛选条件

- **提供商**: 筛选特定AI提供商的数据
- **用户ID**: 查看特定用户的使用记录
- **模型**: 筛选特定模型的使用情况

### 3. 查看统计信息

#### 概览标签页

- 查看总体使用统计
- 每日使用趋势图表
- 系统性能指标

#### 提供商统计

- 各提供商调用次数对比
- 费用分布情况
- 平均响应时间对比

#### 模型统计

- 具体模型使用频率
- 模型成本分析
- 性能表现对比

#### 用户统计

- 用户使用量排行
- 用户费用统计
- 最后活跃时间

#### 详细记录

- 完整的调用日志
- 成功/失败状态
- 错误信息详情
- 响应时间统计

### 4. 导出数据

#### CSV导出

- 点击"导出CSV"按钮
- 下载包含所有详细记录的CSV文件
- 可用于Excel或其他数据分析工具

#### JSON导出

- 点击"导出JSON"按钮
- 下载结构化的JSON数据
- 可用于程序化处理

## 数据说明

### 费用计算

- 费用基于实际Token使用量计算
- 不同模型有不同的定价策略
- 支持多币种显示（默认USD）

### Token统计

- **Prompt Tokens**: 输入文本的Token数量
- **Completion Tokens**: AI生成文本的Token数量
- **Total Tokens**: 总Token使用量

### 响应时间

- 从发送请求到收到完整响应的时间
- 包括网络延迟和处理时间
- 单位：毫秒(ms)

### 成功率

- 成功调用次数 / 总调用次数 × 100%
- 排除网络错误和API限制
- 反映系统稳定性

## 性能优化建议

### 1. 成本控制

- 监控高成本用户的使用模式
- 设置合理的费用阈值
- 优化模型选择策略

### 2. 性能监控

- 关注平均响应时间
- 识别性能瓶颈
- 优化缓存策略

### 3. 用户管理

- 分析用户使用习惯
- 识别异常使用模式
- 优化用户体验

## 故障排除

### 常见问题

#### 1. 无法访问后台管理

- 确认用户具有admin角色
- 检查登录状态
- 联系系统管理员

#### 2. 数据不显示

- 检查日期范围设置
- 确认数据库连接正常
- 查看控制台错误信息

#### 3. 导出功能异常

- 检查浏览器下载设置
- 确认数据量是否过大
- 尝试刷新页面

### 技术支持

如遇到技术问题，请：

1. 查看浏览器控制台错误信息
2. 检查网络连接状态
3. 联系开发团队

## 安全注意事项

### 数据保护

- 所有数据都经过加密存储
- 访问日志会被记录
- 敏感信息会被脱敏处理

### 权限管理

- 定期审查管理员权限
- 使用强密码策略
- 启用多因素认证

### 数据备份

- 定期备份重要数据
- 测试恢复流程
- 制定灾难恢复计划

## 更新日志

### v1.0.0 (2024-01-XX)

- 初始版本发布
- 基础统计功能
- 数据导出功能
- 权限控制

---

_最后更新: 2024年1月_
