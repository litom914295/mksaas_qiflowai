# A/B 测试环境变量配置示例
# 
# 使用方法：
# 1. 复制此文件为 .env.local（或 .env.production）
# 2. 根据实际情况修改配置值
# 3. 重启应用使配置生效

# ===== A/B 测试总开关 =====

# v2.1 A/B测试开关（true=启用，false=禁用，全部走v2.0）
AB_V21_ENABLED=true

# ===== 调试与测试 =====

# 强制指定变体（仅用于开发/测试）
# 可选值：control | v2_1
# 留空或注释掉此行则按正常分流逻辑
# AB_V21_FORCE_VARIANT=v2_1

# ===== 分流配置 =====

# v2.1 变体占比（0-100）
# 默认值：50（即50%用户进入v2.1，50%进入v2.0）
# AB_V21_SPLIT_RATIO=50

# ===== 埋点与监控 =====

# 埋点系统API地址（如使用外部分析平台）
# ANALYTICS_API_URL=https://analytics.example.com/events

# 埋点API Key
# ANALYTICS_API_KEY=your_api_key_here

# 是否启用控制台日志（开发环境建议启用）
AB_V21_LOG_ENABLED=true

# ===== 性能监控 =====

# 报告生成超时阈值（毫秒）
REPORT_GENERATION_TIMEOUT_MS=5000

# JSON解析失败告警阈值（百分比）
JSON_PARSE_FAILURE_THRESHOLD=1

# ===== 护栏配置 =====

# 退款率告警阈值（百分比）
REFUND_RATE_THRESHOLD=3

# 5xx错误率告警阈值（百分比点）
ERROR_5XX_THRESHOLD=0.5

# ===== 灰度发布 =====

# 灰度流量占比（0-100）
# 灰度阶段使用，正式AB时忽略此配置
# CANARY_TRAFFIC_PERCENTAGE=10

# ===== 备注 =====

# 1. AB_V21_ENABLED=false 时，所有用户走 v2.0（紧急回滚时使用）
# 2. AB_V21_FORCE_VARIANT 仅用于开发/测试环境，生产环境必须注释掉
# 3. 修改环境变量后需重启应用服务
# 4. 建议在生产环境使用配置中心（如Consul/etcd）动态管理开关
