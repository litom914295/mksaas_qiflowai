{
  "version": "1.0.0",
  "description": "玄空飞星测试数据集 - 包含边界条件、典型盘例、兼向替卦等高覆盖场景",
  "metadata": {
    "created": "2025-11-12",
    "total_cases": 25,
    "categories": [
      "三元九运边界",
      "典型格局",
      "兼向与替卦",
      "特殊时刻",
      "基准盘例"
    ]
  },
  "testCases": [
    {
      "id": "boundary_001",
      "category": "三元九运边界",
      "name": "八运末期（2023年12月31日）",
      "input": {
        "observedAt": "2023-12-31T23:59:59Z",
        "facing": { "degrees": 180 },
        "buildYear": 2023
      },
      "expected": {
        "period": 8,
        "isBoundary": true
      },
      "notes": "八运最后一天，应判断为八运"
    },
    {
      "id": "boundary_002",
      "category": "三元九运边界",
      "name": "九运首日（2024年1月1日）",
      "input": {
        "observedAt": "2024-01-01T00:00:00Z",
        "facing": { "degrees": 180 },
        "buildYear": 2024
      },
      "expected": {
        "period": 9,
        "isBoundary": true
      },
      "notes": "九运第一天，应判断为九运"
    },
    {
      "id": "boundary_003",
      "category": "三元九运边界",
      "name": "立春节气前（2024年2月3日）",
      "input": {
        "observedAt": "2024-02-03T00:00:00Z",
        "facing": { "degrees": 0 },
        "buildYear": 2024
      },
      "expected": {
        "period": 9
      },
      "notes": "测试节气对运数判断的影响（如有）"
    },
    {
      "id": "pattern_001",
      "category": "典型格局",
      "name": "旺山旺水格局 - 九运子山午向",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 180 },
        "location": { "lat": 39.9, "lon": 116.4 }
      },
      "expected": {
        "period": 9,
        "geju": {
          "types": ["旺山旺水"],
          "isFavorable": true
        },
        "zuoPalace": 1,
        "xiangPalace": 9
      },
      "notes": "子山午向在九运为旺山旺水格局"
    },
    {
      "id": "pattern_002",
      "category": "典型格局",
      "name": "上山下水格局 - 九运午山子向",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 0 }
      },
      "expected": {
        "period": 9,
        "geju": {
          "types": ["上山下水"],
          "isFavorable": false
        },
        "zuoPalace": 9,
        "xiangPalace": 1
      },
      "notes": "午山子向在九运为上山下水格局"
    },
    {
      "id": "pattern_003",
      "category": "典型格局",
      "name": "双星到向 - 八运艮山坤向",
      "input": {
        "observedAt": "2023-06-01T12:00:00Z",
        "facing": { "degrees": 225 }
      },
      "expected": {
        "period": 8,
        "geju": {
          "types": ["双星会向"]
        }
      },
      "notes": "八运艮山坤向双星到向格局"
    },
    {
      "id": "pattern_004",
      "category": "典型格局",
      "name": "双星到坐 - 八运坤山艮向",
      "input": {
        "observedAt": "2023-06-01T12:00:00Z",
        "facing": { "degrees": 45 }
      },
      "expected": {
        "period": 8,
        "geju": {
          "types": ["双星会坐"]
        }
      },
      "notes": "八运坤山艮向双星到坐格局"
    },
    {
      "id": "jianxiang_001",
      "category": "兼向与替卦",
      "name": "正向 - 子山午向正中（0度）",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 180, "toleranceDeg": 0.5 }
      },
      "expected": {
        "period": 9,
        "location": {
          "zuo": "子",
          "xiang": "午",
          "isJian": false,
          "ambiguous": false
        }
      },
      "notes": "正向，无兼向"
    },
    {
      "id": "jianxiang_002",
      "category": "兼向与替卦",
      "name": "兼向 - 子山午向兼癸丁（7度）",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 187, "toleranceDeg": 0.5 }
      },
      "expected": {
        "period": 9,
        "location": {
          "zuo": "子",
          "xiang": "午",
          "isJian": true,
          "jianzuo": "癸",
          "jianxiang": "丁"
        }
      },
      "notes": "兼向癸丁方向，偏离正向7度"
    },
    {
      "id": "jianxiang_003",
      "category": "兼向与替卦",
      "name": "空亡线边界 - 接近卦气分界",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 22.5, "toleranceDeg": 0.5 }
      },
      "expected": {
        "period": 9,
        "location": {
          "isOnBoundary": true,
          "ambiguous": true
        }
      },
      "notes": "22.5度为坎艮分界，空亡线位置"
    },
    {
      "id": "tigua_001",
      "category": "兼向与替卦",
      "name": "替卦典型 - 子山午向替为癸山丁向",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 180 },
        "config": { "applyTiGua": true }
      },
      "expected": {
        "period": 9,
        "tiguaAnalysis": {
          "hasTigua": true,
          "rule": {
            "category": "正替"
          }
        }
      },
      "notes": "测试正替规则应用"
    },
    {
      "id": "mountain_001",
      "category": "二十四山边界",
      "name": "壬山丙向（337.5度）",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 157.5 }
      },
      "expected": {
        "period": 9,
        "location": {
          "zuo": "壬",
          "xiang": "丙"
        }
      },
      "notes": "壬山337.5度边界"
    },
    {
      "id": "mountain_002",
      "category": "二十四山边界",
      "name": "乾山巽向（315度）",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 135 }
      },
      "expected": {
        "period": 9,
        "location": {
          "zuo": "乾",
          "xiang": "巽",
          "zuoPalace": 6,
          "xiangPalace": 4
        }
      },
      "notes": "乾巽为八卦正位"
    },
    {
      "id": "time_001",
      "category": "特殊时刻",
      "name": "子时跨日（23:30）",
      "input": {
        "observedAt": "2024-06-01T23:30:00+08:00",
        "facing": { "degrees": 180 }
      },
      "expected": {
        "period": 9
      },
      "notes": "23:00-01:00 子时按传统应算作次日"
    },
    {
      "id": "time_002",
      "category": "特殊时刻",
      "name": "闰月期间",
      "input": {
        "observedAt": "2023-03-22T12:00:00+08:00",
        "facing": { "degrees": 90 }
      },
      "expected": {
        "period": 8
      },
      "notes": "2023年闰二月，农历计算特殊情况"
    },
    {
      "id": "benchmark_001",
      "category": "基准盘例",
      "name": "标准九运盘 - 子山午向",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 180 }
      },
      "expected": {
        "period": 9,
        "plates": {
          "period": [
            { "palace": 1, "periodStar": 5 },
            { "palace": 2, "periodStar": 1 },
            { "palace": 3, "periodStar": 3 },
            { "palace": 4, "periodStar": 4 },
            { "palace": 5, "periodStar": 9 },
            { "palace": 6, "periodStar": 2 },
            { "palace": 7, "periodStar": 7 },
            { "palace": 8, "periodStar": 8 },
            { "palace": 9, "periodStar": 6 }
          ]
        }
      },
      "notes": "九运天盘基准，中宫入9，按洛书顺飞"
    },
    {
      "id": "benchmark_002",
      "category": "基准盘例",
      "name": "标准八运盘 - 子山午向",
      "input": {
        "observedAt": "2023-06-01T12:00:00Z",
        "facing": { "degrees": 180 }
      },
      "expected": {
        "period": 8,
        "plates": {
          "period": [
            { "palace": 1, "periodStar": 4 },
            { "palace": 2, "periodStar": 9 },
            { "palace": 3, "periodStar": 2 },
            { "palace": 4, "periodStar": 3 },
            { "palace": 5, "periodStar": 8 },
            { "palace": 6, "periodStar": 1 },
            { "palace": 7, "periodStar": 6 },
            { "palace": 8, "periodStar": 7 },
            { "palace": 9, "periodStar": 5 }
          ]
        }
      },
      "notes": "八运天盘基准，中宫入8，按洛书顺飞"
    },
    {
      "id": "algorithm_001",
      "category": "算法验证",
      "name": "顺飞验证 - 从1顺飞9步",
      "input": {
        "star": 1,
        "steps": 9,
        "direction": "forward"
      },
      "expected": {
        "result": 1
      },
      "notes": "性质测试：顺飞九步回到原点"
    },
    {
      "id": "algorithm_002",
      "category": "算法验证",
      "name": "逆飞验证 - 从9逆飞9步",
      "input": {
        "star": 9,
        "steps": 9,
        "direction": "backward"
      },
      "expected": {
        "result": 9
      },
      "notes": "性质测试：逆飞九步回到原点"
    },
    {
      "id": "algorithm_003",
      "category": "算法验证",
      "name": "顺逆互逆 - 5顺飞3步再逆飞3步",
      "input": {
        "star": 5,
        "forwardSteps": 3,
        "backwardSteps": 3
      },
      "expected": {
        "result": 5
      },
      "notes": "性质测试：顺飞与逆飞互为逆运算"
    },
    {
      "id": "yuanlong_001",
      "category": "元龙测试",
      "name": "天元龙 - 子山（坎宫天元龙）",
      "input": {
        "mountain": "子"
      },
      "expected": {
        "yuanLong": "天",
        "bagua": "坎",
        "palace": 1
      },
      "notes": "子山为天元龙"
    },
    {
      "id": "yuanlong_002",
      "category": "元龙测试",
      "name": "人元龙 - 癸山（坎宫人元龙）",
      "input": {
        "mountain": "癸"
      },
      "expected": {
        "yuanLong": "人",
        "bagua": "坎",
        "palace": 1
      },
      "notes": "癸山为人元龙"
    },
    {
      "id": "yuanlong_003",
      "category": "元龙测试",
      "name": "地元龙 - 壬山（坎宫地元龙）",
      "input": {
        "mountain": "壬"
      },
      "expected": {
        "yuanLong": "地",
        "bagua": "坎",
        "palace": 1
      },
      "notes": "壬山为地元龙"
    },
    {
      "id": "edge_001",
      "category": "边界条件",
      "name": "极小角度（0.1度）",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": 0.1 }
      },
      "expected": {
        "period": 9,
        "location": {
          "zuo": "子"
        }
      },
      "notes": "测试极小角度处理"
    },
    {
      "id": "edge_002",
      "category": "边界条件",
      "name": "负角度（-10度）",
      "input": {
        "observedAt": "2024-06-01T12:00:00Z",
        "facing": { "degrees": -10 }
      },
      "expected": {
        "period": 9,
        "normalizedDegrees": 350
      },
      "notes": "测试负角度标准化"
    }
  ]
}
