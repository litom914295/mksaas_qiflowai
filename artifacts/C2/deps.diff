# C2 依赖差异分析

## qiflow-ai 独有依赖（需要迁移到主项目）

### 算法相关依赖
- `@aharris02/bazi-calculator-by-alvamind`: ^1.0.16 - 八字计算算法
- `date-fns-tz`: ^3.2.0 - 时区处理（八字计算需要）

### 可视化相关依赖
- `fabric`: ^6.7.1 - Canvas 图形库
- `konva`: ^9.3.22 - 2D Canvas 库
- `react-konva`: ^19.0.7 - React Konva 绑定
- `html2canvas`: ^1.4.1 - HTML 转 Canvas
- `canvg`: ^4.0.3 - SVG 转 Canvas
- `jspdf`: ^3.0.2 - PDF 生成
- `tesseract.js`: ^6.0.1 - OCR 文字识别
- `sharp`: ^0.34.3 - 图像处理

### 测试相关依赖
- `@testing-library/jest-dom`: ^6.8.0
- `@testing-library/react`: ^16.3.0
- `jest`: ^30.1.2
- `jest-environment-jsdom`: ^30.1.2
- `@types/jest`: ^30.0.0

### 开发工具依赖
- `prettier`: ^3.6.2
- `eslint`: ^9
- `eslint-config-next`: 15.5.2
- `@eslint/eslintrc`: ^3
- `undici`: ^7.15.0

## 主项目已有但版本不同的依赖

### 版本差异
- `next`: qiflow-ai(15.5.2) vs 主项目(15.2.1) - 主项目版本较旧
- `react`: qiflow-ai(19.1.0) vs 主项目(^19.0.0) - 基本一致
- `react-dom`: qiflow-ai(19.1.0) vs 主项目(^19.0.0) - 基本一致
- `lucide-react`: qiflow-ai(^0.542.0) vs 主项目(^0.483.0) - qiflow-ai版本较新
- `zod`: qiflow-ai(^4.1.5) vs 主项目(^4.0.17) - qiflow-ai版本较新

## 迁移建议

### 必须迁移的依赖（核心功能）
1. `@aharris02/bazi-calculator-by-alvamind` - 八字计算核心
2. `date-fns-tz` - 时区处理
3. `fabric` - Canvas 图形处理
4. `konva` + `react-konva` - 2D 图形渲染
5. `jspdf` - PDF 生成
6. `sharp` - 图像处理

### 可选迁移的依赖（增强功能）
1. `html2canvas` - HTML 转图片
2. `canvg` - SVG 处理
3. `tesseract.js` - OCR 功能

### 开发工具依赖（建议迁移）
1. `prettier` - 代码格式化
2. `jest` + 相关测试库 - 单元测试
3. `eslint` 相关 - 代码检查

## 版本升级建议
1. 升级 `next` 到 15.5.2
2. 升级 `lucide-react` 到 ^0.542.0
3. 升级 `zod` 到 ^4.1.5


