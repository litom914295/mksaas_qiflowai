# QiFlow AI Staging 环境配置模板
# 复制此文件为 .env.staging 并填写实际值

# ========================================
# 应用基础配置
# ========================================
NODE_ENV=production
NEXT_PUBLIC_APP_URL=https://staging.yourdomain.com
NEXT_PUBLIC_APP_NAME=QiFlow AI (Staging)

# ========================================
# 数据库配置
# ========================================
DATABASE_URL=postgresql://user:password@staging-host:5432/database_staging
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=5

# ========================================
# 认证配置
# ========================================
BETTER_AUTH_SECRET=your-staging-secret-key-here
BETTER_AUTH_URL=https://staging.yourdomain.com
SESSION_MAX_AGE=86400  # 24小时（Staging环境可以短一些）

# ========================================
# 支付配置 (使用测试密钥)
# ========================================
# Stripe 测试模式
STRIPE_SECRET_KEY=sk_test_xxx
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_test_xxx

# ========================================
# AI 服务配置
# ========================================
OPENAI_API_KEY=sk-xxx
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-3.5-turbo  # Staging 环境可以使用更便宜的模型

# ========================================
# 云存储配置
# ========================================
AWS_S3_BUCKET=qiflow-staging
ALIYUN_OSS_BUCKET=qiflow-staging

# ========================================
# 缓存配置
# ========================================
REDIS_URL=redis://user:password@staging-redis:6379

# ========================================
# 邮件服务配置
# ========================================
SMTP_HOST=smtp.mailtrap.io
SMTP_PORT=2525
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=staging@yourdomain.com

# ========================================
# 监控与日志配置
# ========================================
# Sentry (使用独立的 Staging 项目)
NEXT_PUBLIC_SENTRY_DSN=https://xxx@o0000.ingest.sentry.io/staging
NEXT_PUBLIC_SENTRY_ENABLED=true
SENTRY_PROJECT=your-project-staging

# 日志级别更详细
LOG_LEVEL=debug
LOG_SERVICE_ENABLED=false  # Staging 环境可以不启用

# 性能监控
PERFORMANCE_MONITORING_ENABLED=true

# ========================================
# 备份配置
# ========================================
BACKUP_DIR=/var/backups/qiflow-staging
BACKUP_RETENTION_DAYS=7  # Staging 环境保留时间短一些
BACKUP_UPLOAD_TO_CLOUD=false  # Staging 环境可以不上传云端

# ========================================
# 安全配置
# ========================================
NEXT_PUBLIC_ALLOWED_ORIGINS=https://staging.yourdomain.com

# Rate Limiting (更宽松)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=200
RATE_LIMIT_WINDOW_MS=900000

# ========================================
# 功能开关
# ========================================
ENABLE_PAYMENT=true  # 使用 Stripe 测试模式
ENABLE_ANALYTICS=true
ENABLE_AB_TESTING=true  # Staging 环境可以测试 A/B 测试
ENABLE_ERROR_TRACKING=true
ENABLE_CREDITS=true

# ========================================
# 测试用户配置
# ========================================
TEST_USER_EMAIL=test@staging.yourdomain.com
TEST_USER_PASSWORD=test123456
TEST_USER_CREDITS=10000  # 测试用户初始积分

# ========================================
# Debug 配置
# ========================================
DEBUG=true
NEXT_PUBLIC_DEBUG_MODE=true
VERBOSE_LOGGING=true

# ========================================
# Staging 特有配置
# ========================================
STAGING_WARNING_ENABLED=true  # 显示 Staging 环境警告
AUTO_SEED_DATA=true  # 自动填充测试数据
RESET_DB_ON_DEPLOY=false  # 是否在部署时重置数据库
